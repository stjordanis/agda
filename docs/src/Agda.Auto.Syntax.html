<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Agda.Auto.Syntax</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.IORef</span></span><span>
</span><span id="line-5"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier">Hiding</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html"><span class="hs-identifier">Agda.Auto.NarrowingSearch</span></a></span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html"><span class="hs-identifier">Agda.Utils.Impossible</span></a></span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-comment">-- | Unique identifiers for variable occurrences in unification.</span><span>
</span><span id="line-13"></span><span class="hs-keyword">type</span><span> </span><span id="UId"><span class="annot"><a href="Agda.Auto.Syntax.html#UId"><span class="hs-identifier hs-var">UId</span></a></span></span><span> </span><span id="local-6989586621680756176"><span class="annot"><a href="#local-6989586621680756176"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#Metavar"><span class="hs-identifier hs-type">Metavar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756176"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756176"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">data</span><span> </span><span id="HintMode"><span class="annot"><a href="Agda.Auto.Syntax.html#HintMode"><span class="hs-identifier hs-var">HintMode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HMNormal"><span class="annot"><a href="Agda.Auto.Syntax.html#HMNormal"><span class="hs-identifier hs-var">HMNormal</span></a></span></span><span>
</span><span id="line-16"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span id="HMRecCall"><span class="annot"><a href="Agda.Auto.Syntax.html#HMRecCall"><span class="hs-identifier hs-var">HMRecCall</span></a></span></span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">data</span><span> </span><span id="EqReasoningConsts"><span class="annot"><a href="Agda.Auto.Syntax.html#EqReasoningConsts"><span class="hs-identifier hs-var">EqReasoningConsts</span></a></span></span><span> </span><span id="local-6989586621680756416"><span class="annot"><a href="#local-6989586621680756416"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EqReasoningConsts"><span class="annot"><a href="Agda.Auto.Syntax.html#EqReasoningConsts"><span class="hs-identifier hs-var">EqReasoningConsts</span></a></span></span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="eqrcId"><span class="annot"><span class="annottext">forall o. EqReasoningConsts o -&gt; ConstRef o
</span><a href="Agda.Auto.Syntax.html#eqrcId"><span class="hs-identifier hs-var hs-var">eqrcId</span></a></span></span><span>    </span><span class="hs-comment">-- &quot;_&#8801;_&quot;</span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="eqrcBegin"><span class="annot"><span class="annottext">forall o. EqReasoningConsts o -&gt; ConstRef o
</span><a href="Agda.Auto.Syntax.html#eqrcBegin"><span class="hs-identifier hs-var hs-var">eqrcBegin</span></a></span></span><span> </span><span class="hs-comment">-- &quot;begin_&quot;</span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="eqrcStep"><span class="annot"><span class="annottext">forall o. EqReasoningConsts o -&gt; ConstRef o
</span><a href="Agda.Auto.Syntax.html#eqrcStep"><span class="hs-identifier hs-var hs-var">eqrcStep</span></a></span></span><span>  </span><span class="hs-comment">-- &quot;_&#8801;&#10216;_&#10217;_&quot;</span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="eqrcEnd"><span class="annot"><span class="annottext">forall o. EqReasoningConsts o -&gt; ConstRef o
</span><a href="Agda.Auto.Syntax.html#eqrcEnd"><span class="hs-identifier hs-var hs-var">eqrcEnd</span></a></span></span><span>   </span><span class="hs-comment">-- &quot;_&#8718;&quot;</span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="eqrcSym"><span class="annot"><span class="annottext">forall o. EqReasoningConsts o -&gt; ConstRef o
</span><a href="Agda.Auto.Syntax.html#eqrcSym"><span class="hs-identifier hs-var hs-var">eqrcSym</span></a></span></span><span>   </span><span class="hs-comment">-- &quot;sym&quot;</span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="eqrcCong"><span class="annot"><span class="annottext">forall o. EqReasoningConsts o -&gt; ConstRef o
</span><a href="Agda.Auto.Syntax.html#eqrcCong"><span class="hs-identifier hs-var hs-var">eqrcCong</span></a></span></span><span>  </span><span class="hs-comment">-- &quot;cong&quot;</span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756416"><span class="hs-identifier hs-type">o</span></a></span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-keyword">data</span><span> </span><span id="EqReasoningState"><span class="annot"><a href="Agda.Auto.Syntax.html#EqReasoningState"><span class="hs-identifier hs-var">EqReasoningState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EqRSNone"><span class="annot"><a href="Agda.Auto.Syntax.html#EqRSNone"><span class="hs-identifier hs-var">EqRSNone</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="EqRSChain"><span class="annot"><a href="Agda.Auto.Syntax.html#EqRSChain"><span class="hs-identifier hs-var">EqRSChain</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="EqRSPrf1"><span class="annot"><a href="Agda.Auto.Syntax.html#EqRSPrf1"><span class="hs-identifier hs-var">EqRSPrf1</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="EqRSPrf2"><span class="annot"><a href="Agda.Auto.Syntax.html#EqRSPrf2"><span class="hs-identifier hs-var">EqRSPrf2</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="EqRSPrf3"><span class="annot"><a href="Agda.Auto.Syntax.html#EqRSPrf3"><span class="hs-identifier hs-var">EqRSPrf3</span></a></span></span><span>
</span><span id="line-29"></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680756158"><span id="local-6989586621680756160"><span class="annot"><span class="annottext">EqReasoningState -&gt; EqReasoningState -&gt; Bool
(EqReasoningState -&gt; EqReasoningState -&gt; Bool)
-&gt; (EqReasoningState -&gt; EqReasoningState -&gt; Bool)
-&gt; Eq EqReasoningState
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: EqReasoningState -&gt; EqReasoningState -&gt; Bool
$c/= :: EqReasoningState -&gt; EqReasoningState -&gt; Bool
== :: EqReasoningState -&gt; EqReasoningState -&gt; Bool
$c== :: EqReasoningState -&gt; EqReasoningState -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680756151"><span id="local-6989586621680756153"><span id="local-6989586621680756155"><span class="annot"><span class="annottext">Int -&gt; EqReasoningState -&gt; ShowS
[EqReasoningState] -&gt; ShowS
EqReasoningState -&gt; String
(Int -&gt; EqReasoningState -&gt; ShowS)
-&gt; (EqReasoningState -&gt; String)
-&gt; ([EqReasoningState] -&gt; ShowS)
-&gt; Show EqReasoningState
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [EqReasoningState] -&gt; ShowS
$cshowList :: [EqReasoningState] -&gt; ShowS
show :: EqReasoningState -&gt; String
$cshow :: EqReasoningState -&gt; String
showsPrec :: Int -&gt; EqReasoningState -&gt; ShowS
$cshowsPrec :: Int -&gt; EqReasoningState -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-comment">-- | The concrete instance of the 'blk' parameter in 'Metavar'.</span><span>
</span><span id="line-32"></span><span class="hs-comment">--   I.e., the information passed to the search control.</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-keyword">data</span><span> </span><span id="RefInfo"><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-var">RefInfo</span></a></span></span><span> </span><span id="local-6989586621680756404"><span class="annot"><a href="#local-6989586621680756404"><span class="hs-identifier hs-type">o</span></a></span></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="RIEnv"><span class="annot"><a href="Agda.Auto.Syntax.html#RIEnv"><span class="hs-identifier hs-var">RIEnv</span></a></span></span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="rieHints"><span class="annot"><span class="annottext">forall o. RefInfo o -&gt; [(ConstRef o, HintMode)]
</span><a href="Agda.Auto.Syntax.html#rieHints"><span class="hs-identifier hs-var hs-var">rieHints</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756404"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#HintMode"><span class="hs-identifier hs-type">HintMode</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="rieDefFreeVars"><span class="annot"><span class="annottext">forall o. RefInfo o -&gt; Int
</span><a href="Agda.Auto.Syntax.html#rieDefFreeVars"><span class="hs-identifier hs-var hs-var">rieDefFreeVars</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span>
</span><span id="line-38"></span><span>      </span><span class="hs-comment">-- ^ Nat - deffreevars</span><span>
</span><span id="line-39"></span><span>      </span><span class="hs-comment">--   (to make cost of using module parameters correspond to that of hints).</span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="rieEqReasoningConsts"><span class="annot"><span class="annottext">forall o. RefInfo o -&gt; Maybe (EqReasoningConsts o)
</span><a href="Agda.Auto.Syntax.html#rieEqReasoningConsts"><span class="hs-identifier hs-var hs-var">rieEqReasoningConsts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#EqReasoningConsts"><span class="hs-identifier hs-type">EqReasoningConsts</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756404"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RIMainInfo"><span class="annot"><a href="Agda.Auto.Syntax.html#RIMainInfo"><span class="hs-identifier hs-var">RIMainInfo</span></a></span></span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="riMainCxtLength"><span class="annot"><span class="annottext">forall o. RefInfo o -&gt; Int
</span><a href="Agda.Auto.Syntax.html#riMainCxtLength"><span class="hs-identifier hs-var hs-var">riMainCxtLength</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span>
</span><span id="line-44"></span><span>      </span><span class="hs-comment">-- ^ Size of typing context in which meta was created.</span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="riMainType"><span class="annot"><span class="annottext">forall o. RefInfo o -&gt; HNExp o
</span><a href="Agda.Auto.Syntax.html#riMainType"><span class="hs-identifier hs-var hs-var">riMainType</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#HNExp"><span class="hs-identifier hs-type">HNExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756404"><span class="hs-identifier hs-type">o</span></a></span><span>
</span><span id="line-46"></span><span>      </span><span class="hs-comment">-- ^ Head normal form of type of meta.</span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="riMainIota"><span class="annot"><span class="annottext">forall o. RefInfo o -&gt; Bool
</span><a href="Agda.Auto.Syntax.html#riMainIota"><span class="hs-identifier hs-var hs-var">riMainIota</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-48"></span><span>       </span><span class="hs-comment">-- ^ True if iota steps performed when normalising target type</span><span>
</span><span id="line-49"></span><span>       </span><span class="hs-comment">--   (used to put cost when traversing a definition</span><span>
</span><span id="line-50"></span><span>       </span><span class="hs-comment">--    by construction instantiation).</span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RIUnifInfo"><span class="annot"><a href="Agda.Auto.Syntax.html#RIUnifInfo"><span class="hs-identifier hs-var">RIUnifInfo</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#CAction"><span class="hs-identifier hs-type">CAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756404"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#HNExp"><span class="hs-identifier hs-type">HNExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756404"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-comment">-- meta environment, opp hne</span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RICopyInfo"><span class="annot"><a href="Agda.Auto.Syntax.html#RICopyInfo"><span class="hs-identifier hs-var">RICopyInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ICExp"><span class="hs-identifier hs-type">ICExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756404"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RIIotaStep"><span class="annot"><a href="Agda.Auto.Syntax.html#RIIotaStep"><span class="hs-identifier hs-var">RIIotaStep</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- True - semiflex</span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RIInferredTypeUnknown"><span class="annot"><a href="Agda.Auto.Syntax.html#RIInferredTypeUnknown"><span class="hs-identifier hs-var">RIInferredTypeUnknown</span></a></span></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RINotConstructor"><span class="annot"><a href="Agda.Auto.Syntax.html#RINotConstructor"><span class="hs-identifier hs-var">RINotConstructor</span></a></span></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RIUsedVars"><span class="annot"><a href="Agda.Auto.Syntax.html#RIUsedVars"><span class="hs-identifier hs-var">RIUsedVars</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#UId"><span class="hs-identifier hs-type">UId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756404"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#Elr"><span class="hs-identifier hs-type">Elr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756404"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RIPickSubsvar"><span class="annot"><a href="Agda.Auto.Syntax.html#RIPickSubsvar"><span class="hs-identifier hs-var">RIPickSubsvar</span></a></span></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RIEqRState"><span class="annot"><a href="Agda.Auto.Syntax.html#RIEqRState"><span class="hs-identifier hs-var">RIEqRState</span></a></span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#EqReasoningState"><span class="hs-identifier hs-type">EqReasoningState</span></a></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RICheckElim"><span class="annot"><a href="Agda.Auto.Syntax.html#RICheckElim"><span class="hs-identifier hs-var">RICheckElim</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- isdep</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RICheckProjIndex"><span class="annot"><a href="Agda.Auto.Syntax.html#RICheckProjIndex"><span class="hs-identifier hs-var">RICheckProjIndex</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756404"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- noof proj functions</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">type</span><span> </span><span id="MyPB"><span class="annot"><a href="Agda.Auto.Syntax.html#MyPB"><span class="hs-identifier hs-var">MyPB</span></a></span></span><span> </span><span id="local-6989586621680756129"><span class="annot"><a href="#local-6989586621680756129"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#PB"><span class="hs-identifier hs-type">PB</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756129"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span class="hs-keyword">type</span><span> </span><span id="MyMB"><span class="annot"><a href="Agda.Auto.Syntax.html#MyMB"><span class="hs-identifier hs-var">MyMB</span></a></span></span><span> </span><span id="local-6989586621680756126"><span class="annot"><a href="#local-6989586621680756126"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680756125"><span class="annot"><a href="#local-6989586621680756125"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#MB"><span class="hs-identifier hs-type">MB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756126"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756125"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-keyword">type</span><span> </span><span id="Nat"><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-var">Nat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-keyword">data</span><span> </span><span id="MId"><span class="annot"><a href="Agda.Auto.Syntax.html#MId"><span class="hs-identifier hs-var">MId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Id"><span class="annot"><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-var">Id</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-74"></span><span>         </span><span class="hs-glyph">|</span><span> </span><span id="NoId"><span class="annot"><a href="Agda.Auto.Syntax.html#NoId"><span class="hs-identifier hs-var">NoId</span></a></span></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="hs-comment">-- | Abstraction with maybe a name.</span><span>
</span><span id="line-77"></span><span class="hs-comment">--</span><span>
</span><span id="line-78"></span><span class="hs-comment">--   Different from Agda, where there is also info</span><span>
</span><span id="line-79"></span><span class="hs-comment">--   whether function is constant.</span><span>
</span><span id="line-80"></span><span class="hs-keyword">data</span><span> </span><span id="Abs"><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span></span><span> </span><span id="local-6989586621680756311"><span class="annot"><a href="#local-6989586621680756311"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Abs"><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MId"><span class="hs-identifier hs-type">MId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756311"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-81"></span><span>
</span><span id="line-82"></span><span class="hs-comment">-- | Constant signatures.</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-keyword">data</span><span> </span><span id="ConstDef"><span class="annot"><a href="Agda.Auto.Syntax.html#ConstDef"><span class="hs-identifier hs-var">ConstDef</span></a></span></span><span> </span><span id="local-6989586621680756392"><span class="annot"><a href="#local-6989586621680756392"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ConstDef"><span class="annot"><a href="Agda.Auto.Syntax.html#ConstDef"><span class="hs-identifier hs-var">ConstDef</span></a></span></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="cdname"><span class="annot"><span class="annottext">forall o. ConstDef o -&gt; String
</span><a href="Agda.Auto.Syntax.html#cdname"><span class="hs-identifier hs-var hs-var">cdname</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-comment">-- ^ For debug printing.</span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="cdorigin"><span class="annot"><span class="annottext">forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var hs-var">cdorigin</span></a></span></span><span>      </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680756392"><span class="hs-identifier hs-type">o</span></a></span><span>
</span><span id="line-88"></span><span>    </span><span class="hs-comment">-- ^ Reference to the Agda constant.</span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="cdtype"><span class="annot"><span class="annottext">forall o. ConstDef o -&gt; MExp o
</span><a href="Agda.Auto.Syntax.html#cdtype"><span class="hs-identifier hs-var hs-var">cdtype</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756392"><span class="hs-identifier hs-type">o</span></a></span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-comment">-- ^ Type of constant.</span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="cdcont"><span class="annot"><span class="annottext">forall o. ConstDef o -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var hs-var">cdcont</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#DeclCont"><span class="hs-identifier hs-type">DeclCont</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756392"><span class="hs-identifier hs-type">o</span></a></span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-comment">-- ^ Constant definition.</span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="cddeffreevars"><span class="annot"><span class="annottext">forall o. ConstDef o -&gt; Int
</span><a href="Agda.Auto.Syntax.html#cddeffreevars"><span class="hs-identifier hs-var hs-var">cddeffreevars</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-comment">-- ^ Free vars of the module where the constant is defined..</span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-comment">-- contains no metas</span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="hs-comment">-- | Constant definitions.</span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span class="hs-keyword">data</span><span> </span><span id="DeclCont"><span class="annot"><a href="Agda.Auto.Syntax.html#DeclCont"><span class="hs-identifier hs-var">DeclCont</span></a></span></span><span> </span><span id="local-6989586621680756332"><span class="annot"><a href="#local-6989586621680756332"><span class="hs-identifier hs-type">o</span></a></span></span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Def"><span class="annot"><a href="Agda.Auto.Syntax.html#Def"><span class="hs-identifier hs-var">Def</span></a></span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756332"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- maybe an index to elimand argument</span><span>
</span><span id="line-101"></span><span>                       </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- maybe index to elim arg if semiflex</span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Datatype"><span class="annot"><a href="Agda.Auto.Syntax.html#Datatype"><span class="hs-identifier hs-var">Datatype</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756332"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- constructors</span><span>
</span><span id="line-103"></span><span>             </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756332"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- projection functions (in case it is a record)</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Constructor"><span class="annot"><a href="Agda.Auto.Syntax.html#Constructor"><span class="hs-identifier hs-var">Constructor</span></a></span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-comment">-- number of omitted args</span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Postulate"><span class="annot"><a href="Agda.Auto.Syntax.html#Postulate"><span class="hs-identifier hs-var">Postulate</span></a></span></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="hs-keyword">type</span><span> </span><span id="Clause"><span class="annot"><a href="Agda.Auto.Syntax.html#Clause"><span class="hs-identifier hs-var">Clause</span></a></span></span><span> </span><span id="local-6989586621680756110"><span class="annot"><a href="#local-6989586621680756110"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756110"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756110"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span class="hs-keyword">data</span><span> </span><span id="Pat"><span class="annot"><a href="Agda.Auto.Syntax.html#Pat"><span class="hs-identifier hs-var">Pat</span></a></span></span><span> </span><span id="local-6989586621680756109"><span class="annot"><a href="#local-6989586621680756109"><span class="hs-identifier hs-type">o</span></a></span></span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="PatConApp"><span class="annot"><a href="Agda.Auto.Syntax.html#PatConApp"><span class="hs-identifier hs-var">PatConApp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756109"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756109"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PatVar"><span class="annot"><a href="Agda.Auto.Syntax.html#PatVar"><span class="hs-identifier hs-var">PatVar</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="PatExp"><span class="annot"><a href="Agda.Auto.Syntax.html#PatExp"><span class="hs-identifier hs-var">PatExp</span></a></span></span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-comment">-- ^ Dot pattern.</span><span>
</span><span id="line-115"></span><span class="hs-comment">{- TODO: projection patterns.
  | PatProj (ConstRef o)
    -- ^ Projection pattern.
-}</span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="hs-keyword">type</span><span> </span><span id="ConstRef"><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-var">ConstRef</span></a></span></span><span> </span><span id="local-6989586621680756105"><span class="annot"><a href="#local-6989586621680756105"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IORef</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstDef"><span class="hs-identifier hs-type">ConstDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756105"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span class="hs-comment">-- | Head of application (elimination).</span><span>
</span><span id="line-123"></span><span class="hs-keyword">data</span><span> </span><span id="Elr"><span class="annot"><a href="Agda.Auto.Syntax.html#Elr"><span class="hs-identifier hs-var">Elr</span></a></span></span><span> </span><span id="local-6989586621680756381"><span class="annot"><a href="#local-6989586621680756381"><span class="hs-identifier hs-type">o</span></a></span></span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Var"><span class="annot"><a href="Agda.Auto.Syntax.html#Var"><span class="hs-identifier hs-var">Var</span></a></span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Const"><span class="annot"><a href="Agda.Auto.Syntax.html#Const"><span class="hs-identifier hs-var">Const</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756381"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680756095"><span id="local-6989586621680756101"><span class="annot"><span class="annottext">Elr o -&gt; Elr o -&gt; Bool
(Elr o -&gt; Elr o -&gt; Bool) -&gt; (Elr o -&gt; Elr o -&gt; Bool) -&gt; Eq (Elr o)
forall o. Elr o -&gt; Elr o -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: Elr o -&gt; Elr o -&gt; Bool
$c/= :: forall o. Elr o -&gt; Elr o -&gt; Bool
== :: Elr o -&gt; Elr o -&gt; Bool
$c== :: forall o. Elr o -&gt; Elr o -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span id="local-6989586621680756380"><span class="annot"><a href="Agda.Auto.Syntax.html#getVar"><span class="hs-identifier hs-type">getVar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Elr"><span class="hs-identifier hs-type">Elr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756380"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span></span><span>
</span><span id="line-129"></span><span id="getVar"><span class="annot"><span class="annottext">getVar :: forall o. Elr o -&gt; Maybe Int
</span><a href="Agda.Auto.Syntax.html#getVar"><span class="hs-identifier hs-var hs-var">getVar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621680756093"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680756093"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680756093"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-130"></span><span class="annot"><a href="Agda.Auto.Syntax.html#getVar"><span class="hs-identifier hs-var">getVar</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Const"><span class="hs-identifier hs-type">Const</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span id="local-6989586621680756378"><span class="annot"><a href="Agda.Auto.Syntax.html#getConst"><span class="hs-identifier hs-type">getConst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Elr"><span class="hs-identifier hs-type">Elr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756378"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756378"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-133"></span><span id="getConst"><span class="annot"><span class="annottext">getConst :: forall o. Elr o -&gt; Maybe (ConstRef o)
</span><a href="Agda.Auto.Syntax.html#getConst"><span class="hs-identifier hs-var hs-var">getConst</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Const"><span class="hs-identifier hs-type">Const</span></a></span><span> </span><span id="local-6989586621680756091"><span class="annot"><span class="annottext">ConstRef o
</span><a href="#local-6989586621680756091"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstRef o -&gt; Maybe (ConstRef o)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">ConstRef o
</span><a href="#local-6989586621680756091"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-134"></span><span class="annot"><a href="Agda.Auto.Syntax.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (ConstRef o)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-keyword">data</span><span> </span><span id="Sort"><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-var">Sort</span></a></span></span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Set"><span class="annot"><a href="Agda.Auto.Syntax.html#Set"><span class="hs-identifier hs-var">Set</span></a></span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="UnknownSort"><span class="annot"><a href="Agda.Auto.Syntax.html#UnknownSort"><span class="hs-identifier hs-var">UnknownSort</span></a></span></span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Type"><span class="annot"><a href="Agda.Auto.Syntax.html#Type"><span class="hs-identifier hs-var">Type</span></a></span></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-comment">-- | Agsy's internal syntax.</span><span>
</span><span id="line-142"></span><span class="hs-keyword">data</span><span> </span><span id="Exp"><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-var">Exp</span></a></span></span><span> </span><span id="local-6989586621680756376"><span class="annot"><a href="#local-6989586621680756376"><span class="hs-identifier hs-type">o</span></a></span></span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="App"><span class="annot"><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-var">App</span></a></span></span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="appUId"><span class="annot"><span class="annottext">forall o. Exp o -&gt; Maybe (UId o)
</span><a href="Agda.Auto.Syntax.html#appUId"><span class="hs-identifier hs-var hs-var">appUId</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#UId"><span class="hs-identifier hs-type">UId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756376"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>      </span><span class="hs-comment">-- ^ Unique identifier of the head.</span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="appOK"><span class="annot"><span class="annottext">forall o. Exp o -&gt; OKHandle (RefInfo o)
</span><a href="Agda.Auto.Syntax.html#appOK"><span class="hs-identifier hs-var hs-var">appOK</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#OKHandle"><span class="hs-identifier hs-type">OKHandle</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756376"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>      </span><span class="hs-comment">-- ^ This application has been type-checked.</span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="appHead"><span class="annot"><span class="annottext">forall o. Exp o -&gt; Elr o
</span><a href="Agda.Auto.Syntax.html#appHead"><span class="hs-identifier hs-var hs-var">appHead</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Elr"><span class="hs-identifier hs-type">Elr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756376"><span class="hs-identifier hs-type">o</span></a></span><span>
</span><span id="line-149"></span><span>      </span><span class="hs-comment">-- ^ Head.</span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="appElims"><span class="annot"><span class="annottext">forall o. Exp o -&gt; MArgList o
</span><a href="Agda.Auto.Syntax.html#appElims"><span class="hs-identifier hs-var hs-var">appElims</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MArgList"><span class="hs-identifier hs-type">MArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756376"><span class="hs-identifier hs-type">o</span></a></span><span>
</span><span id="line-151"></span><span>      </span><span class="hs-comment">-- ^ Arguments.</span><span>
</span><span id="line-152"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-153"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Lam"><span class="annot"><a href="Agda.Auto.Syntax.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier hs-type">Hiding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756376"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-comment">-- ^ Lambda with hiding information.</span><span>
</span><span id="line-155"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Pi"><span class="annot"><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#UId"><span class="hs-identifier hs-type">UId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756376"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier hs-type">Hiding</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756376"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756376"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-comment">-- ^ @True@ if possibly dependent (var not known to not occur).</span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-comment">--   @False@ if non-dependent.</span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Sort"><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-var">Sort</span></a></span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="AbsurdLambda"><span class="annot"><a href="Agda.Auto.Syntax.html#AbsurdLambda"><span class="hs-identifier hs-var">AbsurdLambda</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier hs-type">Hiding</span></a></span><span>
</span><span id="line-160"></span><span>    </span><span class="hs-comment">-- ^ Absurd lambda with hiding information.</span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span id="local-6989586621680756367"><span class="annot"><a href="Agda.Auto.Syntax.html#dontCare"><span class="hs-identifier hs-type">dontCare</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756367"><span class="hs-identifier hs-type">o</span></a></span></span><span>
</span><span id="line-163"></span><span id="dontCare"><span class="annot"><span class="annottext">dontCare :: forall o. Exp o
</span><a href="Agda.Auto.Syntax.html#dontCare"><span class="hs-identifier hs-var hs-var">dontCare</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sort -&gt; Exp o
forall o. Sort -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-var">Sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Auto.Syntax.html#UnknownSort"><span class="hs-identifier hs-var">UnknownSort</span></a></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="hs-comment">-- | &quot;Maybe expression&quot;:  Expression or reference to meta variable.</span><span>
</span><span id="line-166"></span><span class="hs-keyword">type</span><span> </span><span id="MExp"><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-var">MExp</span></a></span></span><span> </span><span id="local-6989586621680756077"><span class="annot"><a href="#local-6989586621680756077"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#MM"><span class="hs-identifier hs-type">MM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756077"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756077"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span class="hs-keyword">data</span><span> </span><span id="ArgList"><span class="annot"><a href="Agda.Auto.Syntax.html#ArgList"><span class="hs-identifier hs-var">ArgList</span></a></span></span><span> </span><span id="local-6989586621680756298"><span class="annot"><a href="#local-6989586621680756298"><span class="hs-identifier hs-type">o</span></a></span></span><span>
</span><span id="line-169"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ALNil"><span class="annot"><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span></span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-comment">-- ^ No more eliminations.</span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ALCons"><span class="annot"><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-var">ALCons</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier hs-type">Hiding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756298"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MArgList"><span class="hs-identifier hs-type">MArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756298"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-comment">-- ^ Application and tail.</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ALProj"><span class="annot"><a href="Agda.Auto.Syntax.html#ALProj"><span class="hs-identifier hs-var">ALProj</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MArgList"><span class="hs-identifier hs-type">MArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756298"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#MM"><span class="hs-identifier hs-type">MM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756298"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756298"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier hs-type">Hiding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MArgList"><span class="hs-identifier hs-type">MArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756298"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-comment">-- ^ proj pre args, projfcn idx, tail</span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ALConPar"><span class="annot"><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-var">ALConPar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MArgList"><span class="hs-identifier hs-type">MArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756298"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-comment">-- ^ Constructor parameter (missing in Agda).</span><span>
</span><span id="line-179"></span><span>    </span><span class="hs-comment">--   Agsy has monomorphic constructors.</span><span>
</span><span id="line-180"></span><span>    </span><span class="hs-comment">--   Inserted to cover glitch of polymorphic constructor</span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-comment">--   applications coming from Agda</span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span class="hs-keyword">type</span><span> </span><span id="MArgList"><span class="annot"><a href="Agda.Auto.Syntax.html#MArgList"><span class="hs-identifier hs-var">MArgList</span></a></span></span><span> </span><span id="local-6989586621680756072"><span class="annot"><a href="#local-6989586621680756072"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#MM"><span class="hs-identifier hs-type">MM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ArgList"><span class="hs-identifier hs-type">ArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756072"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756072"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-keyword">data</span><span> </span><span id="WithSeenUIds"><span class="annot"><a href="Agda.Auto.Syntax.html#WithSeenUIds"><span class="hs-identifier hs-var">WithSeenUIds</span></a></span></span><span> </span><span id="local-6989586621680756364"><span class="annot"><a href="#local-6989586621680756364"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680756363"><span class="annot"><a href="#local-6989586621680756363"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="WithSeenUIds"><span class="annot"><a href="Agda.Auto.Syntax.html#WithSeenUIds"><span class="hs-identifier hs-var">WithSeenUIds</span></a></span></span><span>
</span><span id="line-186"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="seenUIds"><span class="annot"><span class="annottext">forall a o. WithSeenUIds a o -&gt; [Maybe (UId o)]
</span><a href="Agda.Auto.Syntax.html#seenUIds"><span class="hs-identifier hs-var hs-var">seenUIds</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#UId"><span class="hs-identifier hs-type">UId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756363"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-187"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="rawValue"><span class="annot"><span class="annottext">forall a o. WithSeenUIds a o -&gt; a
</span><a href="Agda.Auto.Syntax.html#rawValue"><span class="hs-identifier hs-var hs-var">rawValue</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680756364"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-188"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span class="hs-keyword">type</span><span> </span><span id="HNExp"><span class="annot"><a href="Agda.Auto.Syntax.html#HNExp"><span class="hs-identifier hs-var">HNExp</span></a></span></span><span> </span><span id="local-6989586621680756068"><span class="annot"><a href="#local-6989586621680756068"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#WithSeenUIds"><span class="hs-identifier hs-type">WithSeenUIds</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#HNExp%27"><span class="hs-identifier hs-type">HNExp'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756068"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680756068"><span class="hs-identifier hs-type">o</span></a></span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span class="hs-keyword">data</span><span> </span><span id="HNExp%27"><span class="annot"><a href="Agda.Auto.Syntax.html#HNExp%27"><span class="hs-identifier hs-var">HNExp'</span></a></span></span><span> </span><span id="local-6989586621680756066"><span class="annot"><a href="#local-6989586621680756066"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-193"></span><span>    </span><span id="HNApp"><span class="annot"><a href="Agda.Auto.Syntax.html#HNApp"><span class="hs-identifier hs-var">HNApp</span></a></span></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Elr"><span class="hs-identifier hs-type">Elr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756066"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ICArgList"><span class="hs-identifier hs-type">ICArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756066"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HNLam"><span class="annot"><a href="Agda.Auto.Syntax.html#HNLam"><span class="hs-identifier hs-var">HNLam</span></a></span></span><span>  </span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier hs-type">Hiding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ICExp"><span class="hs-identifier hs-type">ICExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756066"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HNPi"><span class="annot"><a href="Agda.Auto.Syntax.html#HNPi"><span class="hs-identifier hs-var">HNPi</span></a></span></span><span>   </span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier hs-type">Hiding</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ICExp"><span class="hs-identifier hs-type">ICExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756066"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ICExp"><span class="hs-identifier hs-type">ICExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756066"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="HNSort"><span class="annot"><a href="Agda.Auto.Syntax.html#HNSort"><span class="hs-identifier hs-var">HNSort</span></a></span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="hs-comment">-- | Head-normal form of 'ICArgList'.  First entry is exposed.</span><span>
</span><span id="line-199"></span><span class="hs-comment">--</span><span>
</span><span id="line-200"></span><span class="hs-comment">--   Q: Why are there no projection eliminations?</span><span>
</span><span id="line-201"></span><span class="hs-keyword">data</span><span> </span><span id="HNArgList"><span class="annot"><a href="Agda.Auto.Syntax.html#HNArgList"><span class="hs-identifier hs-var">HNArgList</span></a></span></span><span> </span><span id="local-6989586621680756060"><span class="annot"><a href="#local-6989586621680756060"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HNALNil"><span class="annot"><a href="Agda.Auto.Syntax.html#HNALNil"><span class="hs-identifier hs-var">HNALNil</span></a></span></span><span>
</span><span id="line-202"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span id="HNALCons"><span class="annot"><a href="Agda.Auto.Syntax.html#HNALCons"><span class="hs-identifier hs-var">HNALCons</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier hs-type">Hiding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ICExp"><span class="hs-identifier hs-type">ICExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756060"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ICArgList"><span class="hs-identifier hs-type">ICArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756060"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span id="HNALConPar"><span class="annot"><a href="Agda.Auto.Syntax.html#HNALConPar"><span class="hs-identifier hs-var">HNALConPar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ICArgList"><span class="hs-identifier hs-type">ICArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756060"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="hs-comment">-- | Lazy concatenation of argument lists under explicit substitutions.</span><span>
</span><span id="line-206"></span><span class="hs-keyword">data</span><span> </span><span id="ICArgList"><span class="annot"><a href="Agda.Auto.Syntax.html#ICArgList"><span class="hs-identifier hs-var">ICArgList</span></a></span></span><span> </span><span id="local-6989586621680756274"><span class="annot"><a href="#local-6989586621680756274"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CALNil"><span class="annot"><a href="Agda.Auto.Syntax.html#CALNil"><span class="hs-identifier hs-var">CALNil</span></a></span></span><span>
</span><span id="line-207"></span><span>                 </span><span class="hs-glyph">|</span><span> </span><span id="CALConcat"><span class="annot"><a href="Agda.Auto.Syntax.html#CALConcat"><span class="hs-identifier hs-var">CALConcat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Clos"><span class="hs-identifier hs-type">Clos</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MArgList"><span class="hs-identifier hs-type">MArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756274"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680756274"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ICArgList"><span class="hs-identifier hs-type">ICArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756274"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-comment">-- | An expression @a@ in an explicit substitution @[CAction a]@.</span><span>
</span><span id="line-210"></span><span class="hs-keyword">type</span><span> </span><span id="ICExp"><span class="annot"><a href="Agda.Auto.Syntax.html#ICExp"><span class="hs-identifier hs-var">ICExp</span></a></span></span><span> </span><span id="local-6989586621680756054"><span class="annot"><a href="#local-6989586621680756054"><span class="hs-identifier hs-type">o</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Clos"><span class="hs-identifier hs-type">Clos</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756054"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680756054"><span class="hs-identifier hs-type">o</span></a></span><span>
</span><span id="line-211"></span><span class="hs-keyword">data</span><span> </span><span id="Clos"><span class="annot"><a href="Agda.Auto.Syntax.html#Clos"><span class="hs-identifier hs-var">Clos</span></a></span></span><span> </span><span id="local-6989586621680756264"><span class="annot"><a href="#local-6989586621680756264"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680756265"><span class="annot"><a href="#local-6989586621680756265"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Clos"><span class="annot"><a href="Agda.Auto.Syntax.html#Clos"><span class="hs-identifier hs-var">Clos</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#CAction"><span class="hs-identifier hs-type">CAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756265"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680756264"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-212"></span><span>
</span><span id="line-213"></span><span class="hs-keyword">type</span><span> </span><span id="CExp"><span class="annot"><a href="Agda.Auto.Syntax.html#CExp"><span class="hs-identifier hs-var">CExp</span></a></span></span><span> </span><span id="local-6989586621680756052"><span class="annot"><a href="#local-6989586621680756052"><span class="hs-identifier hs-type">o</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#TrBr"><span class="hs-identifier hs-type">TrBr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ICExp"><span class="hs-identifier hs-type">ICExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756052"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680756052"><span class="hs-identifier hs-type">o</span></a></span><span>
</span><span id="line-214"></span><span class="hs-keyword">data</span><span> </span><span id="TrBr"><span class="annot"><a href="Agda.Auto.Syntax.html#TrBr"><span class="hs-identifier hs-var">TrBr</span></a></span></span><span> </span><span id="local-6989586621680756267"><span class="annot"><a href="#local-6989586621680756267"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621680756268"><span class="annot"><a href="#local-6989586621680756268"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TrBr"><span class="annot"><a href="Agda.Auto.Syntax.html#TrBr"><span class="hs-identifier hs-var">TrBr</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756268"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621680756267"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-comment">-- | Entry of an explicit substitution.</span><span>
</span><span id="line-217"></span><span class="hs-comment">--</span><span>
</span><span id="line-218"></span><span class="hs-comment">--   An explicit substitution is a list of @CAction@s.</span><span>
</span><span id="line-219"></span><span class="hs-comment">--   This is isomorphic to the usual presentation where</span><span>
</span><span id="line-220"></span><span class="hs-comment">--   @Skip@ and @Weak@ would be constructors of exp. substs.</span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="hs-keyword">data</span><span> </span><span id="CAction"><span class="annot"><a href="Agda.Auto.Syntax.html#CAction"><span class="hs-identifier hs-var">CAction</span></a></span></span><span> </span><span id="local-6989586621680756260"><span class="annot"><a href="#local-6989586621680756260"><span class="hs-identifier hs-type">o</span></a></span></span><span>
</span><span id="line-223"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Sub"><span class="annot"><a href="Agda.Auto.Syntax.html#Sub"><span class="hs-identifier hs-var">Sub</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ICExp"><span class="hs-identifier hs-type">ICExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756260"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-comment">-- ^ Instantation of variable.</span><span>
</span><span id="line-225"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Skip"><span class="annot"><a href="Agda.Auto.Syntax.html#Skip"><span class="hs-identifier hs-var">Skip</span></a></span></span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-comment">-- ^ For going under a binder, often called &quot;Lift&quot;.</span><span>
</span><span id="line-227"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Weak"><span class="annot"><a href="Agda.Auto.Syntax.html#Weak"><span class="hs-identifier hs-var">Weak</span></a></span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span>
</span><span id="line-228"></span><span>    </span><span class="hs-comment">-- ^ Shifting substitution (going to a larger context).</span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="hs-keyword">type</span><span> </span><span id="Ctx"><span class="annot"><a href="Agda.Auto.Syntax.html#Ctx"><span class="hs-identifier hs-var">Ctx</span></a></span></span><span> </span><span id="local-6989586621680756046"><span class="annot"><a href="#local-6989586621680756046"><span class="hs-identifier hs-type">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MId"><span class="hs-identifier hs-type">MId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#CExp"><span class="hs-identifier hs-type">CExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756046"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="hs-keyword">type</span><span> </span><span id="EE"><span class="annot"><a href="Agda.Auto.Syntax.html#EE"><span class="hs-identifier hs-var">EE</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="hs-comment">-- -------------------------------------------</span><span>
</span><span id="line-235"></span><span>
</span><span id="line-236"></span><span id="local-6989586621680756357"><span class="annot"><a href="Agda.Auto.Syntax.html#detecteliminand"><span class="hs-identifier hs-type">detecteliminand</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756357"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span></span><span>
</span><span id="line-237"></span><span id="detecteliminand"><span class="annot"><span class="annottext">detecteliminand :: forall o. [Clause o] -&gt; Maybe Int
</span><a href="Agda.Auto.Syntax.html#detecteliminand"><span class="hs-identifier hs-var hs-var">detecteliminand</span></a></span></span><span> </span><span id="local-6989586621680756036"><span class="annot"><span class="annottext">[Clause o]
</span><a href="#local-6989586621680756036"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-238"></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(Clause o -&gt; Maybe Int) -&gt; [Clause o] -&gt; [Maybe Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Clause o -&gt; Maybe Int
forall {t} {o} {b}. Num t =&gt; ([Pat o], b) -&gt; Maybe t
</span><a href="#local-6989586621680756035"><span class="hs-identifier hs-var">cleli</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause o]
</span><a href="#local-6989586621680756036"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621680756034"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621680756034"><span class="hs-identifier hs-var">i</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621680756033"><span class="annot"><span class="annottext">[Maybe Int]
</span><a href="#local-6989586621680756033"><span class="hs-identifier hs-var">is</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">(Maybe Int -&gt; Bool) -&gt; [Maybe Int] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621680756034"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int -&gt; Maybe Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Maybe Int]
</span><a href="#local-6989586621680756033"><span class="hs-identifier hs-var">is</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621680756034"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-241"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-242"></span><span>  </span><span id="local-6989586621680756035"><span class="annot"><span class="annottext">cleli :: ([Pat o], b) -&gt; Maybe t
</span><a href="#local-6989586621680756035"><span class="hs-identifier hs-var hs-var">cleli</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680756028"><span class="annot"><span class="annottext">[Pat o]
</span><a href="#local-6989586621680756028"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; [Pat o] -&gt; Maybe t
forall {t} {o}. Num t =&gt; t -&gt; [Pat o] -&gt; Maybe t
</span><a href="#local-6989586621680756027"><span class="hs-identifier hs-var">pateli</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">[Pat o]
</span><a href="#local-6989586621680756028"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-243"></span><span>  </span><span id="local-6989586621680756027"><span class="annot"><span class="annottext">pateli :: t -&gt; [Pat o] -&gt; Maybe t
</span><a href="#local-6989586621680756027"><span class="hs-identifier hs-var hs-var">pateli</span></a></span></span><span> </span><span id="local-6989586621680756022"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680756022"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#PatConApp"><span class="hs-identifier hs-type">PatConApp</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef o
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680756021"><span class="annot"><span class="annottext">[Pat o]
</span><a href="#local-6989586621680756021"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680756020"><span class="annot"><span class="annottext">[Pat o]
</span><a href="#local-6989586621680756020"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">(Pat o -&gt; Bool) -&gt; [Pat o] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">Pat o -&gt; Bool
forall {o}. Pat o -&gt; Bool
</span><a href="#local-6989586621680756019"><span class="hs-identifier hs-var">notcon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Pat o]
</span><a href="#local-6989586621680756021"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[Pat o] -&gt; [Pat o] -&gt; [Pat o]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Pat o]
</span><a href="#local-6989586621680756020"><span class="hs-identifier hs-var">pats</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">t -&gt; Maybe t
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680756022"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe t
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-244"></span><span>  </span><span class="annot"><a href="#local-6989586621680756027"><span class="hs-identifier hs-var">pateli</span></a></span><span> </span><span id="local-6989586621680756018"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680756018"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pat o
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680756017"><span class="annot"><span class="annottext">[Pat o]
</span><a href="#local-6989586621680756017"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; [Pat o] -&gt; Maybe t
</span><a href="#local-6989586621680756027"><span class="hs-identifier hs-var">pateli</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680756018"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">t -&gt; t -&gt; t
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">t
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Pat o]
</span><a href="#local-6989586621680756017"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-245"></span><span>  </span><span class="annot"><a href="#local-6989586621680756027"><span class="hs-identifier hs-var">pateli</span></a></span><span> </span><span id="local-6989586621680756015"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680756015"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe t
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-246"></span><span>  </span><span id="local-6989586621680756019"><span class="annot"><span class="annottext">notcon :: Pat o -&gt; Bool
</span><a href="#local-6989586621680756019"><span class="hs-identifier hs-var hs-var">notcon</span></a></span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#PatConApp"><span class="hs-identifier hs-type">PatConApp</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-247"></span><span>  </span><span class="annot"><a href="#local-6989586621680756019"><span class="hs-identifier hs-var">notcon</span></a></span><span> </span><span class="annot"><span class="annottext">Pat o
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span id="local-6989586621680756340"><span class="annot"><a href="Agda.Auto.Syntax.html#detectsemiflex"><span class="hs-identifier hs-type">detectsemiflex</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756340"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#Clause"><span class="hs-identifier hs-type">Clause</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756340"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-250"></span><span id="detectsemiflex"><span class="annot"><span class="annottext">detectsemiflex :: forall o. ConstRef o -&gt; [Clause o] -&gt; IO Bool
</span><a href="Agda.Auto.Syntax.html#detectsemiflex"><span class="hs-identifier hs-var hs-var">detectsemiflex</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConstRef o
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Clause o]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-comment">-- disabled</span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span id="local-6989586621680756336"><span class="annot"><a href="Agda.Auto.Syntax.html#categorizedecl"><span class="hs-identifier hs-type">categorizedecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756336"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-253"></span><span id="categorizedecl"><span class="annot"><span class="annottext">categorizedecl :: forall o. ConstRef o -&gt; IO ()
</span><a href="Agda.Auto.Syntax.html#categorizedecl"><span class="hs-identifier hs-var hs-var">categorizedecl</span></a></span></span><span> </span><span id="local-6989586621680756007"><span class="annot"><span class="annottext">ConstRef o
</span><a href="#local-6989586621680756007"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-254"></span><span> </span><span id="local-6989586621680756006"><span class="annot"><span class="annottext">ConstDef o
</span><a href="#local-6989586621680756006"><span class="hs-identifier hs-var">cd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ConstRef o -&gt; IO (ConstDef o)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef o
</span><a href="#local-6989586621680756007"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-255"></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConstDef o -&gt; DeclCont o
forall o. ConstDef o -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var">cdcont</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef o
</span><a href="#local-6989586621680756006"><span class="hs-identifier hs-var">cd</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-256"></span><span>  </span><span class="annot"><a href="Agda.Auto.Syntax.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span id="local-6989586621680756004"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680756004"><span class="hs-identifier hs-var">narg</span></a></span></span><span> </span><span id="local-6989586621680756003"><span class="annot"><span class="annottext">[Clause o]
</span><a href="#local-6989586621680756003"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-257"></span><span>   </span><span id="local-6989586621680756002"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680756002"><span class="hs-identifier hs-var">semif</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ConstRef o -&gt; [Clause o] -&gt; IO Bool
forall o. ConstRef o -&gt; [Clause o] -&gt; IO Bool
</span><a href="Agda.Auto.Syntax.html#detectsemiflex"><span class="hs-identifier hs-var">detectsemiflex</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef o
</span><a href="#local-6989586621680756007"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause o]
</span><a href="#local-6989586621680756003"><span class="hs-identifier hs-var">cls</span></a></span><span>
</span><span id="line-258"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680756001"><span class="annot"><span class="annottext">elim :: Maybe Int
</span><a href="#local-6989586621680756001"><span class="hs-identifier hs-var hs-var">elim</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Clause o] -&gt; Maybe Int
forall o. [Clause o] -&gt; Maybe Int
</span><a href="Agda.Auto.Syntax.html#detecteliminand"><span class="hs-identifier hs-var">detecteliminand</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause o]
</span><a href="#local-6989586621680756003"><span class="hs-identifier hs-var">cls</span></a></span><span>
</span><span id="line-259"></span><span>       </span><span id="local-6989586621680756000"><span class="annot"><span class="annottext">semifb :: Maybe Int
</span><a href="#local-6989586621680756000"><span class="hs-identifier hs-var hs-var">semifb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680756002"><span class="hs-identifier hs-var">semif</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621680756001"><span class="hs-identifier hs-var">elim</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-260"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680755999"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755999"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755999"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-comment">-- just copying val of elim arg. this should be changed</span><span>
</span><span id="line-261"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-262"></span><span>   </span><span class="annot"><span class="annottext">ConstRef o -&gt; ConstDef o -&gt; IO ()
forall a. IORef a -&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">writeIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef o
</span><a href="#local-6989586621680756007"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstDef o
</span><a href="#local-6989586621680756006"><span class="hs-identifier hs-var">cd</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cdcont :: DeclCont o
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var">cdcont</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Clause o] -&gt; Maybe Int -&gt; Maybe Int -&gt; DeclCont o
forall o. Int -&gt; [Clause o] -&gt; Maybe Int -&gt; Maybe Int -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#Def"><span class="hs-identifier hs-var">Def</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680756004"><span class="hs-identifier hs-var">narg</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause o]
</span><a href="#local-6989586621680756003"><span class="hs-identifier hs-var">cls</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621680756001"><span class="hs-identifier hs-var">elim</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621680756000"><span class="hs-identifier hs-var">semifb</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span>  </span><span class="annot"><span class="annottext">DeclCont o
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>
</span><span id="line-265"></span><span class="hs-comment">-- -------------------------------------------</span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span class="hs-keyword">class</span><span> </span><span id="MetaliseOKH"><span class="annot"><a href="Agda.Auto.Syntax.html#MetaliseOKH"><span class="hs-identifier hs-var">MetaliseOKH</span></a></span></span><span> </span><span id="local-6989586621680756327"><span class="annot"><a href="#local-6989586621680756327"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-268"></span><span>  </span><span id="metaliseOKH"><span class="annot"><a href="Agda.Auto.Syntax.html#metaliseOKH"><span class="hs-identifier hs-type">metaliseOKH</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680756327"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621680756327"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756325"><span id="local-6989586621680756326"><span class="annot"><a href="Agda.Auto.Syntax.html#MetaliseOKH"><span class="hs-identifier hs-type">MetaliseOKH</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756326"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MetaliseOKH"><span class="hs-identifier hs-type">MetaliseOKH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#MM"><span class="hs-identifier hs-type">MM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756326"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756325"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-271"></span><span>  </span><span id="local-6989586621680755988"><span class="annot"><span class="annottext">metaliseOKH :: MM t a -&gt; IO (MM t a)
</span><a href="#local-6989586621680755988"><span class="hs-identifier hs-var hs-var hs-var hs-var">metaliseOKH</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-272"></span><span>    </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-type">Meta</span></a></span><span> </span><span id="local-6989586621680755986"><span class="annot"><span class="annottext">Metavar t a
</span><a href="#local-6989586621680755986"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MM t a -&gt; IO (MM t a)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MM t a -&gt; IO (MM t a)) -&gt; MM t a -&gt; IO (MM t a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Metavar t a -&gt; MM t a
forall a blk. Metavar a blk -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-var">Meta</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar t a
</span><a href="#local-6989586621680755986"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-273"></span><span>    </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-type">NotM</span></a></span><span> </span><span id="local-6989586621680755984"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680755984"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">t -&gt; MM t a
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(t -&gt; MM t a) -&gt; IO t -&gt; IO (MM t a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; IO t
forall t. MetaliseOKH t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#metaliseOKH"><span class="hs-identifier hs-var">metaliseOKH</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680755984"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756313"><span class="annot"><a href="Agda.Auto.Syntax.html#MetaliseOKH"><span class="hs-identifier hs-type">MetaliseOKH</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756313"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MetaliseOKH"><span class="hs-identifier hs-type">MetaliseOKH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756313"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-276"></span><span>  </span><span id="local-6989586621680755977"><span class="annot"><span class="annottext">metaliseOKH :: Abs t -&gt; IO (Abs t)
</span><a href="#local-6989586621680755977"><span class="hs-identifier hs-var hs-var hs-var hs-var">metaliseOKH</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span id="local-6989586621680755976"><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621680755976"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621680755975"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680755975"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MId -&gt; t -&gt; Abs t
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621680755976"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">(t -&gt; Abs t) -&gt; IO t -&gt; IO (Abs t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; IO t
forall t. MetaliseOKH t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#metaliseOKH"><span class="hs-identifier hs-var">metaliseOKH</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680755975"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756309"><span class="annot"><a href="Agda.Auto.Syntax.html#MetaliseOKH"><span class="hs-identifier hs-type">MetaliseOKH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756309"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-279"></span><span>  </span><span id="local-6989586621680755955"><span class="annot"><span class="annottext">metaliseOKH :: Exp o -&gt; IO (Exp o)
</span><a href="#local-6989586621680755955"><span class="hs-identifier hs-var hs-var hs-var hs-var">metaliseOKH</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-280"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span id="local-6989586621680755954"><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621680755954"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621680755953"><span class="annot"><span class="annottext">OKHandle (RefInfo o)
</span><a href="#local-6989586621680755953"><span class="hs-identifier hs-var">okh</span></a></span></span><span> </span><span id="local-6989586621680755952"><span class="annot"><span class="annottext">Elr o
</span><a href="#local-6989586621680755952"><span class="hs-identifier hs-var">elr</span></a></span></span><span> </span><span id="local-6989586621680755951"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755951"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-281"></span><span>      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680755950"><span class="annot"><span class="annottext">OKHandle (RefInfo o)
</span><a href="#local-6989586621680755950"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
forall o.
Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621680755954"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">OKHandle (RefInfo o)
</span><a href="#local-6989586621680755950"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Elr o
</span><a href="#local-6989586621680755952"><span class="hs-identifier hs-var">elr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(OKHandle (RefInfo o) -&gt; MArgList o -&gt; Exp o)
-&gt; IO (OKHandle (RefInfo o)) -&gt; IO (MArgList o -&gt; Exp o)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metavar OKVal (RefInfo o) -&gt; OKHandle (RefInfo o)
forall a blk. Metavar a blk -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-var">Meta</span></a></span><span> </span><span class="annot"><span class="annottext">(Metavar OKVal (RefInfo o) -&gt; OKHandle (RefInfo o))
-&gt; IO (Metavar OKVal (RefInfo o)) -&gt; IO (OKHandle (RefInfo o))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">IO (Metavar OKVal (RefInfo o))
forall a blk. IO (Metavar a blk)
</span><a href="Agda.Auto.NarrowingSearch.html#initMeta"><span class="hs-identifier hs-var">initMeta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IO (MArgList o -&gt; Exp o) -&gt; IO (MArgList o) -&gt; IO (Exp o)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">MArgList o -&gt; IO (MArgList o)
forall t. MetaliseOKH t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#metaliseOKH"><span class="hs-identifier hs-var">metaliseOKH</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755951"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-282"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621680755948"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755948"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621680755947"><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755947"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Abs (MExp o) -&gt; Exp o
forall o. Hiding -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755948"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs (MExp o) -&gt; Exp o) -&gt; IO (Abs (MExp o)) -&gt; IO (Exp o)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Abs (MExp o) -&gt; IO (Abs (MExp o))
forall t. MetaliseOKH t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#metaliseOKH"><span class="hs-identifier hs-var">metaliseOKH</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755947"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-283"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621680755946"><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621680755946"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621680755945"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755945"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621680755944"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680755944"><span class="hs-identifier hs-var">dep</span></a></span></span><span> </span><span id="local-6989586621680755943"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755943"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span id="local-6989586621680755942"><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755942"><span class="hs-identifier hs-var">ot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-284"></span><span>      </span><span class="annot"><span class="annottext">Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
forall o.
Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621680755946"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755945"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680755944"><span class="hs-identifier hs-var">dep</span></a></span><span> </span><span class="annot"><span class="annottext">(MExp o -&gt; Abs (MExp o) -&gt; Exp o)
-&gt; IO (MExp o) -&gt; IO (Abs (MExp o) -&gt; Exp o)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MExp o -&gt; IO (MExp o)
forall t. MetaliseOKH t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#metaliseOKH"><span class="hs-identifier hs-var">metaliseOKH</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755943"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Abs (MExp o) -&gt; Exp o) -&gt; IO (Abs (MExp o)) -&gt; IO (Exp o)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Abs (MExp o) -&gt; IO (Abs (MExp o))
forall t. MetaliseOKH t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#metaliseOKH"><span class="hs-identifier hs-var">metaliseOKH</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755942"><span class="hs-identifier hs-var">ot</span></a></span><span>
</span><span id="line-285"></span><span>    </span><span id="local-6989586621680755941"><span class="annot"><span class="annottext">e :: Exp o
</span><a href="#local-6989586621680755941"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp o -&gt; IO (Exp o)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Exp o
</span><a href="#local-6989586621680755941"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-286"></span><span>    </span><span id="local-6989586621680755940"><span class="annot"><span class="annottext">e :: Exp o
</span><a href="#local-6989586621680755940"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.Auto.Syntax.html#AbsurdLambda"><span class="hs-identifier hs-type">AbsurdLambda</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp o -&gt; IO (Exp o)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Exp o
</span><a href="#local-6989586621680755940"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756307"><span class="annot"><a href="Agda.Auto.Syntax.html#MetaliseOKH"><span class="hs-identifier hs-type">MetaliseOKH</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ArgList"><span class="hs-identifier hs-type">ArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756307"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-289"></span><span>  </span><span id="local-6989586621680755925"><span class="annot"><span class="annottext">metaliseOKH :: ArgList o -&gt; IO (ArgList o)
</span><a href="#local-6989586621680755925"><span class="hs-identifier hs-var hs-var hs-var hs-var">metaliseOKH</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-290"></span><span>    </span><span class="annot"><span class="annottext">ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ArgList o -&gt; IO (ArgList o)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ArgList o
forall o. ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span>
</span><span id="line-291"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-type">ALCons</span></a></span><span> </span><span id="local-6989586621680755924"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755924"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621680755923"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755923"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680755922"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755922"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; MExp o -&gt; MArgList o -&gt; ArgList o
forall o. Hiding -&gt; MExp o -&gt; MArgList o -&gt; ArgList o
</span><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-var">ALCons</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755924"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="annot"><span class="annottext">(MExp o -&gt; MArgList o -&gt; ArgList o)
-&gt; IO (MExp o) -&gt; IO (MArgList o -&gt; ArgList o)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MExp o -&gt; IO (MExp o)
forall t. MetaliseOKH t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#metaliseOKH"><span class="hs-identifier hs-var">metaliseOKH</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755923"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">IO (MArgList o -&gt; ArgList o) -&gt; IO (MArgList o) -&gt; IO (ArgList o)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">MArgList o -&gt; IO (MArgList o)
forall t. MetaliseOKH t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#metaliseOKH"><span class="hs-identifier hs-var">metaliseOKH</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755922"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-292"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALProj"><span class="hs-identifier hs-type">ALProj</span></a></span><span> </span><span id="local-6989586621680755921"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755921"><span class="hs-identifier hs-var">eas</span></a></span></span><span> </span><span id="local-6989586621680755920"><span class="annot"><span class="annottext">MM (ConstRef o) (RefInfo o)
</span><a href="#local-6989586621680755920"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621680755919"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755919"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621680755918"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755918"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-293"></span><span>      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680755917"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755917"><span class="hs-identifier hs-var">eas</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MArgList o
-&gt; MM (ConstRef o) (RefInfo o) -&gt; Hiding -&gt; MArgList o -&gt; ArgList o
forall o.
MArgList o
-&gt; MM (ConstRef o) (RefInfo o) -&gt; Hiding -&gt; MArgList o -&gt; ArgList o
</span><a href="Agda.Auto.Syntax.html#ALProj"><span class="hs-identifier hs-var">ALProj</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755917"><span class="hs-identifier hs-var">eas</span></a></span><span> </span><span class="annot"><span class="annottext">MM (ConstRef o) (RefInfo o)
</span><a href="#local-6989586621680755920"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755919"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(MArgList o -&gt; MArgList o -&gt; ArgList o)
-&gt; IO (MArgList o) -&gt; IO (MArgList o -&gt; ArgList o)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MArgList o -&gt; IO (MArgList o)
forall t. MetaliseOKH t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#metaliseOKH"><span class="hs-identifier hs-var">metaliseOKH</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755921"><span class="hs-identifier hs-var">eas</span></a></span><span> </span><span class="annot"><span class="annottext">IO (MArgList o -&gt; ArgList o) -&gt; IO (MArgList o) -&gt; IO (ArgList o)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">MArgList o -&gt; IO (MArgList o)
forall t. MetaliseOKH t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#metaliseOKH"><span class="hs-identifier hs-var">metaliseOKH</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755918"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-294"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-type">ALConPar</span></a></span><span> </span><span id="local-6989586621680755916"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755916"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MArgList o -&gt; ArgList o
forall o. MArgList o -&gt; ArgList o
</span><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-var">ALConPar</span></a></span><span> </span><span class="annot"><span class="annottext">(MArgList o -&gt; ArgList o) -&gt; IO (MArgList o) -&gt; IO (ArgList o)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MArgList o -&gt; IO (MArgList o)
forall t. MetaliseOKH t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#metaliseOKH"><span class="hs-identifier hs-var">metaliseOKH</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755916"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span id="local-6989586621680756297"><span class="annot"><a href="Agda.Auto.Syntax.html#metaliseokh"><span class="hs-identifier hs-type">metaliseokh</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756297"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756297"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-297"></span><span id="metaliseokh"><span class="annot"><span class="annottext">metaliseokh :: forall o. MExp o -&gt; IO (MExp o)
</span><a href="Agda.Auto.Syntax.html#metaliseokh"><span class="hs-identifier hs-var hs-var">metaliseokh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MExp o -&gt; IO (MExp o)
forall t. MetaliseOKH t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#metaliseOKH"><span class="hs-identifier hs-var">metaliseOKH</span></a></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="hs-comment">-- -------------------------------------------</span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span class="hs-keyword">class</span><span> </span><span id="ExpandMetas"><span class="annot"><a href="Agda.Auto.Syntax.html#ExpandMetas"><span class="hs-identifier hs-var">ExpandMetas</span></a></span></span><span> </span><span id="local-6989586621680756292"><span class="annot"><a href="#local-6989586621680756292"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-302"></span><span>  </span><span id="expandMetas"><span class="annot"><a href="Agda.Auto.Syntax.html#expandMetas"><span class="hs-identifier hs-type">expandMetas</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621680756292"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621680756292"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756290"><span id="local-6989586621680756291"><span class="annot"><a href="Agda.Auto.Syntax.html#ExpandMetas"><span class="hs-identifier hs-type">ExpandMetas</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756291"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ExpandMetas"><span class="hs-identifier hs-type">ExpandMetas</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#MM"><span class="hs-identifier hs-type">MM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756291"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756290"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-305"></span><span>  </span><span id="local-6989586621680755901"><span class="annot"><span class="annottext">expandMetas :: MM t a -&gt; IO (MM t a)
</span><a href="#local-6989586621680755901"><span class="hs-identifier hs-var hs-var hs-var hs-var">expandMetas</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-306"></span><span>    </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-type">NotM</span></a></span><span> </span><span id="local-6989586621680755900"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680755900"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">t -&gt; MM t a
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(t -&gt; MM t a) -&gt; IO t -&gt; IO (MM t a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; IO t
forall t. ExpandMetas t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#expandMetas"><span class="hs-identifier hs-var">expandMetas</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680755900"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-307"></span><span>    </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-type">Meta</span></a></span><span> </span><span id="local-6989586621680755899"><span class="annot"><span class="annottext">Metavar t a
</span><a href="#local-6989586621680755899"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-308"></span><span>      </span><span id="local-6989586621680755898"><span class="annot"><span class="annottext">Maybe t
</span><a href="#local-6989586621680755898"><span class="hs-identifier hs-var">mb</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef (Maybe t) -&gt; IO (Maybe t)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metavar t a -&gt; IORef (Maybe t)
forall a blk. Metavar a blk -&gt; IORef (Maybe a)
</span><a href="Agda.Auto.NarrowingSearch.html#mbind"><span class="hs-identifier hs-var">mbind</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar t a
</span><a href="#local-6989586621680755899"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe t
</span><a href="#local-6989586621680755898"><span class="hs-identifier hs-var">mb</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-310"></span><span>        </span><span class="annot"><span class="annottext">Maybe t
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MM t a -&gt; IO (MM t a)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MM t a -&gt; IO (MM t a)) -&gt; MM t a -&gt; IO (MM t a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Metavar t a -&gt; MM t a
forall a blk. Metavar a blk -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-var">Meta</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar t a
</span><a href="#local-6989586621680755899"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-311"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680755896"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680755896"><span class="hs-identifier hs-var">e</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">t -&gt; MM t a
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(t -&gt; MM t a) -&gt; IO t -&gt; IO (MM t a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; IO t
forall t. ExpandMetas t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#expandMetas"><span class="hs-identifier hs-var">expandMetas</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680755896"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756286"><span class="annot"><a href="Agda.Auto.Syntax.html#ExpandMetas"><span class="hs-identifier hs-type">ExpandMetas</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756286"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ExpandMetas"><span class="hs-identifier hs-type">ExpandMetas</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756286"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-314"></span><span>  </span><span id="local-6989586621680755890"><span class="annot"><span class="annottext">expandMetas :: Abs t -&gt; IO (Abs t)
</span><a href="#local-6989586621680755890"><span class="hs-identifier hs-var hs-var hs-var hs-var">expandMetas</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span id="local-6989586621680755889"><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621680755889"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621680755888"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680755888"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MId -&gt; t -&gt; Abs t
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621680755889"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">(t -&gt; Abs t) -&gt; IO t -&gt; IO (Abs t)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">t -&gt; IO t
forall t. ExpandMetas t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#expandMetas"><span class="hs-identifier hs-var">expandMetas</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680755888"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-315"></span><span>
</span><span id="line-316"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756284"><span class="annot"><a href="Agda.Auto.Syntax.html#ExpandMetas"><span class="hs-identifier hs-type">ExpandMetas</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756284"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-317"></span><span>  </span><span id="local-6989586621680755871"><span class="annot"><span class="annottext">expandMetas :: Exp o -&gt; IO (Exp o)
</span><a href="#local-6989586621680755871"><span class="hs-identifier hs-var hs-var hs-var hs-var">expandMetas</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-318"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span id="local-6989586621680755870"><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621680755870"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621680755869"><span class="annot"><span class="annottext">OKHandle (RefInfo o)
</span><a href="#local-6989586621680755869"><span class="hs-identifier hs-var">okh</span></a></span></span><span> </span><span id="local-6989586621680755868"><span class="annot"><span class="annottext">Elr o
</span><a href="#local-6989586621680755868"><span class="hs-identifier hs-var">elr</span></a></span></span><span> </span><span id="local-6989586621680755867"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755867"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
forall o.
Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621680755870"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">OKHandle (RefInfo o)
</span><a href="#local-6989586621680755869"><span class="hs-identifier hs-var">okh</span></a></span><span> </span><span class="annot"><span class="annottext">Elr o
</span><a href="#local-6989586621680755868"><span class="hs-identifier hs-var">elr</span></a></span><span> </span><span class="annot"><span class="annottext">(MArgList o -&gt; Exp o) -&gt; IO (MArgList o) -&gt; IO (Exp o)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MArgList o -&gt; IO (MArgList o)
forall t. ExpandMetas t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#expandMetas"><span class="hs-identifier hs-var">expandMetas</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755867"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-319"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621680755866"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755866"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621680755865"><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755865"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Abs (MExp o) -&gt; Exp o
forall o. Hiding -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755866"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs (MExp o) -&gt; Exp o) -&gt; IO (Abs (MExp o)) -&gt; IO (Exp o)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Abs (MExp o) -&gt; IO (Abs (MExp o))
forall t. ExpandMetas t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#expandMetas"><span class="hs-identifier hs-var">expandMetas</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755865"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-320"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621680755864"><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621680755864"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621680755863"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755863"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621680755862"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680755862"><span class="hs-identifier hs-var">dep</span></a></span></span><span> </span><span id="local-6989586621680755861"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755861"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span id="local-6989586621680755860"><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755860"><span class="hs-identifier hs-var">ot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-321"></span><span>      </span><span class="annot"><span class="annottext">Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
forall o.
Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621680755864"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755863"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680755862"><span class="hs-identifier hs-var">dep</span></a></span><span> </span><span class="annot"><span class="annottext">(MExp o -&gt; Abs (MExp o) -&gt; Exp o)
-&gt; IO (MExp o) -&gt; IO (Abs (MExp o) -&gt; Exp o)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MExp o -&gt; IO (MExp o)
forall t. ExpandMetas t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#expandMetas"><span class="hs-identifier hs-var">expandMetas</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755861"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">IO (Abs (MExp o) -&gt; Exp o) -&gt; IO (Abs (MExp o)) -&gt; IO (Exp o)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Abs (MExp o) -&gt; IO (Abs (MExp o))
forall t. ExpandMetas t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#expandMetas"><span class="hs-identifier hs-var">expandMetas</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755860"><span class="hs-identifier hs-var">ot</span></a></span><span>
</span><span id="line-322"></span><span>    </span><span id="local-6989586621680755859"><span class="annot"><span class="annottext">t :: Exp o
</span><a href="#local-6989586621680755859"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp o -&gt; IO (Exp o)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Exp o
</span><a href="#local-6989586621680755859"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-323"></span><span>    </span><span id="local-6989586621680755858"><span class="annot"><span class="annottext">t :: Exp o
</span><a href="#local-6989586621680755858"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.Auto.Syntax.html#AbsurdLambda"><span class="hs-identifier hs-type">AbsurdLambda</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp o -&gt; IO (Exp o)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Exp o
</span><a href="#local-6989586621680755858"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756283"><span class="annot"><a href="Agda.Auto.Syntax.html#ExpandMetas"><span class="hs-identifier hs-type">ExpandMetas</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ArgList"><span class="hs-identifier hs-type">ArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756283"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-326"></span><span>  </span><span id="local-6989586621680755842"><span class="annot"><span class="annottext">expandMetas :: ArgList o -&gt; IO (ArgList o)
</span><a href="#local-6989586621680755842"><span class="hs-identifier hs-var hs-var hs-var hs-var">expandMetas</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-327"></span><span>    </span><span class="annot"><span class="annottext">ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ArgList o -&gt; IO (ArgList o)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ArgList o
forall o. ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span>
</span><span id="line-328"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-type">ALCons</span></a></span><span> </span><span id="local-6989586621680755841"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755841"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621680755840"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755840"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680755839"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755839"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; MExp o -&gt; MArgList o -&gt; ArgList o
forall o. Hiding -&gt; MExp o -&gt; MArgList o -&gt; ArgList o
</span><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-var">ALCons</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755841"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="annot"><span class="annottext">(MExp o -&gt; MArgList o -&gt; ArgList o)
-&gt; IO (MExp o) -&gt; IO (MArgList o -&gt; ArgList o)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MExp o -&gt; IO (MExp o)
forall t. ExpandMetas t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#expandMetas"><span class="hs-identifier hs-var">expandMetas</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755840"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">IO (MArgList o -&gt; ArgList o) -&gt; IO (MArgList o) -&gt; IO (ArgList o)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">MArgList o -&gt; IO (MArgList o)
forall t. ExpandMetas t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#expandMetas"><span class="hs-identifier hs-var">expandMetas</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755839"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-329"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALProj"><span class="hs-identifier hs-type">ALProj</span></a></span><span> </span><span id="local-6989586621680755838"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755838"><span class="hs-identifier hs-var">eas</span></a></span></span><span> </span><span id="local-6989586621680755837"><span class="annot"><span class="annottext">MM (ConstRef o) (RefInfo o)
</span><a href="#local-6989586621680755837"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621680755836"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755836"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621680755835"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755835"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-330"></span><span>      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680755834"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755834"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680755833"><span class="annot"><span class="annottext">MM (ConstRef o) (RefInfo o)
</span><a href="#local-6989586621680755833"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MArgList o
-&gt; MM (ConstRef o) (RefInfo o) -&gt; Hiding -&gt; MArgList o -&gt; ArgList o
forall o.
MArgList o
-&gt; MM (ConstRef o) (RefInfo o) -&gt; Hiding -&gt; MArgList o -&gt; ArgList o
</span><a href="Agda.Auto.Syntax.html#ALProj"><span class="hs-identifier hs-var">ALProj</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755834"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">MM (ConstRef o) (RefInfo o)
</span><a href="#local-6989586621680755833"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755836"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(MArgList o
 -&gt; MM (ConstRef o) (RefInfo o) -&gt; MArgList o -&gt; ArgList o)
-&gt; IO (MArgList o)
-&gt; IO (MM (ConstRef o) (RefInfo o) -&gt; MArgList o -&gt; ArgList o)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MArgList o -&gt; IO (MArgList o)
forall t. ExpandMetas t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#expandMetas"><span class="hs-identifier hs-var">expandMetas</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755838"><span class="hs-identifier hs-var">eas</span></a></span><span>
</span><span id="line-331"></span><span>      </span><span class="annot"><span class="annottext">IO (MM (ConstRef o) (RefInfo o) -&gt; MArgList o -&gt; ArgList o)
-&gt; IO (MM (ConstRef o) (RefInfo o)) -&gt; IO (MArgList o -&gt; ArgList o)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">MM (ConstRef o) (RefInfo o) -&gt; IO (MM (ConstRef o) (RefInfo o))
forall a blk. MM a blk -&gt; MetaEnv (MM a blk)
</span><a href="Agda.Auto.NarrowingSearch.html#expandbind"><span class="hs-identifier hs-var">expandbind</span></a></span><span> </span><span class="annot"><span class="annottext">MM (ConstRef o) (RefInfo o)
</span><a href="#local-6989586621680755837"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="annot"><span class="annottext">IO (MArgList o -&gt; ArgList o) -&gt; IO (MArgList o) -&gt; IO (ArgList o)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">MArgList o -&gt; IO (MArgList o)
forall t. ExpandMetas t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#expandMetas"><span class="hs-identifier hs-var">expandMetas</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755835"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-332"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-type">ALConPar</span></a></span><span> </span><span id="local-6989586621680755831"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755831"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MArgList o -&gt; ArgList o
forall o. MArgList o -&gt; ArgList o
</span><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-var">ALConPar</span></a></span><span> </span><span class="annot"><span class="annottext">(MArgList o -&gt; ArgList o) -&gt; IO (MArgList o) -&gt; IO (ArgList o)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MArgList o -&gt; IO (MArgList o)
forall t. ExpandMetas t =&gt; t -&gt; IO t
</span><a href="Agda.Auto.Syntax.html#expandMetas"><span class="hs-identifier hs-var">expandMetas</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755831"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-333"></span><span>
</span><span id="line-334"></span><span class="hs-comment">-- ---------------------------------</span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span id="local-6989586621680756278"><span class="annot"><a href="Agda.Auto.Syntax.html#addtrailingargs"><span class="hs-identifier hs-type">addtrailingargs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Clos"><span class="hs-identifier hs-type">Clos</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MArgList"><span class="hs-identifier hs-type">MArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756278"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621680756278"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ICArgList"><span class="hs-identifier hs-type">ICArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756278"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ICArgList"><span class="hs-identifier hs-type">ICArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756278"><span class="hs-identifier hs-type">o</span></a></span></span><span>
</span><span id="line-337"></span><span id="addtrailingargs"><span class="annot"><span class="annottext">addtrailingargs :: forall o. Clos (MArgList o) o -&gt; ICArgList o -&gt; ICArgList o
</span><a href="Agda.Auto.Syntax.html#addtrailingargs"><span class="hs-identifier hs-var hs-var">addtrailingargs</span></a></span></span><span> </span><span id="local-6989586621680755829"><span class="annot"><span class="annottext">Clos (MArgList o) o
</span><a href="#local-6989586621680755829"><span class="hs-identifier hs-var">newargs</span></a></span></span><span> </span><span class="annot"><span class="annottext">ICArgList o
</span><a href="Agda.Auto.Syntax.html#CALNil"><span class="hs-identifier hs-var">CALNil</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clos (MArgList o) o -&gt; ICArgList o -&gt; ICArgList o
forall o. Clos (MArgList o) o -&gt; ICArgList o -&gt; ICArgList o
</span><a href="Agda.Auto.Syntax.html#CALConcat"><span class="hs-identifier hs-var">CALConcat</span></a></span><span> </span><span class="annot"><span class="annottext">Clos (MArgList o) o
</span><a href="#local-6989586621680755829"><span class="hs-identifier hs-var">newargs</span></a></span><span> </span><span class="annot"><span class="annottext">ICArgList o
forall o. ICArgList o
</span><a href="Agda.Auto.Syntax.html#CALNil"><span class="hs-identifier hs-var">CALNil</span></a></span><span>
</span><span id="line-338"></span><span class="annot"><a href="Agda.Auto.Syntax.html#addtrailingargs"><span class="hs-identifier hs-var">addtrailingargs</span></a></span><span> </span><span id="local-6989586621680755828"><span class="annot"><span class="annottext">Clos (MArgList o) o
</span><a href="#local-6989586621680755828"><span class="hs-identifier hs-var">newargs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#CALConcat"><span class="hs-identifier hs-type">CALConcat</span></a></span><span> </span><span id="local-6989586621680755827"><span class="annot"><span class="annottext">Clos (MArgList o) o
</span><a href="#local-6989586621680755827"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621680755826"><span class="annot"><span class="annottext">ICArgList o
</span><a href="#local-6989586621680755826"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clos (MArgList o) o -&gt; ICArgList o -&gt; ICArgList o
forall o. Clos (MArgList o) o -&gt; ICArgList o -&gt; ICArgList o
</span><a href="Agda.Auto.Syntax.html#CALConcat"><span class="hs-identifier hs-var">CALConcat</span></a></span><span> </span><span class="annot"><span class="annottext">Clos (MArgList o) o
</span><a href="#local-6989586621680755827"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Clos (MArgList o) o -&gt; ICArgList o -&gt; ICArgList o
forall o. Clos (MArgList o) o -&gt; ICArgList o -&gt; ICArgList o
</span><a href="Agda.Auto.Syntax.html#addtrailingargs"><span class="hs-identifier hs-var">addtrailingargs</span></a></span><span> </span><span class="annot"><span class="annottext">Clos (MArgList o) o
</span><a href="#local-6989586621680755828"><span class="hs-identifier hs-var">newargs</span></a></span><span> </span><span class="annot"><span class="annottext">ICArgList o
</span><a href="#local-6989586621680755826"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span class="hs-comment">-- ---------------------------------</span><span>
</span><span id="line-341"></span><span>
</span><span id="line-342"></span><span id="local-6989586621680756273"><span class="annot"><a href="Agda.Auto.Syntax.html#closify"><span class="hs-identifier hs-type">closify</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756273"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#CExp"><span class="hs-identifier hs-type">CExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756273"><span class="hs-identifier hs-type">o</span></a></span></span><span>
</span><span id="line-343"></span><span id="closify"><span class="annot"><span class="annottext">closify :: forall o. MExp o -&gt; CExp o
</span><a href="Agda.Auto.Syntax.html#closify"><span class="hs-identifier hs-var hs-var">closify</span></a></span></span><span> </span><span id="local-6989586621680755824"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755824"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MExp o] -&gt; ICExp o -&gt; TrBr (ICExp o) o
forall a o. [MExp o] -&gt; a -&gt; TrBr a o
</span><a href="Agda.Auto.Syntax.html#TrBr"><span class="hs-identifier hs-var">TrBr</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755824"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CAction o] -&gt; MExp o -&gt; ICExp o
forall a o. [CAction o] -&gt; a -&gt; Clos a o
</span><a href="Agda.Auto.Syntax.html#Clos"><span class="hs-identifier hs-var">Clos</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755824"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span id="local-6989586621680756263"><span class="annot"><a href="Agda.Auto.Syntax.html#sub"><span class="hs-identifier hs-type">sub</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756263"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#CExp"><span class="hs-identifier hs-type">CExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756263"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#CExp"><span class="hs-identifier hs-type">CExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756263"><span class="hs-identifier hs-type">o</span></a></span></span><span>
</span><span id="line-346"></span><span class="hs-comment">-- sub e (Clos [] x) = Clos [Sub e] x</span><span>
</span><span id="line-347"></span><span id="sub"><span class="annot"><span class="annottext">sub :: forall o. MExp o -&gt; CExp o -&gt; CExp o
</span><a href="Agda.Auto.Syntax.html#sub"><span class="hs-identifier hs-var hs-var">sub</span></a></span></span><span> </span><span id="local-6989586621680755820"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755820"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#TrBr"><span class="hs-identifier hs-type">TrBr</span></a></span><span> </span><span id="local-6989586621680755819"><span class="annot"><span class="annottext">[MExp o]
</span><a href="#local-6989586621680755819"><span class="hs-identifier hs-var">trs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Clos"><span class="hs-identifier hs-type">Clos</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CAction o
</span><a href="Agda.Auto.Syntax.html#Skip"><span class="hs-identifier hs-var">Skip</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680755818"><span class="annot"><span class="annottext">[CAction o]
</span><a href="#local-6989586621680755818"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680755817"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755817"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MExp o] -&gt; ICExp o -&gt; TrBr (ICExp o) o
forall a o. [MExp o] -&gt; a -&gt; TrBr a o
</span><a href="Agda.Auto.Syntax.html#TrBr"><span class="hs-identifier hs-var">TrBr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755820"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o -&gt; [MExp o] -&gt; [MExp o]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[MExp o]
</span><a href="#local-6989586621680755819"><span class="hs-identifier hs-var">trs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CAction o] -&gt; MExp o -&gt; ICExp o
forall a o. [CAction o] -&gt; a -&gt; Clos a o
</span><a href="Agda.Auto.Syntax.html#Clos"><span class="hs-identifier hs-var">Clos</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ICExp o -&gt; CAction o
forall o. ICExp o -&gt; CAction o
</span><a href="Agda.Auto.Syntax.html#Sub"><span class="hs-identifier hs-var">Sub</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CAction o] -&gt; MExp o -&gt; ICExp o
forall a o. [CAction o] -&gt; a -&gt; Clos a o
</span><a href="Agda.Auto.Syntax.html#Clos"><span class="hs-identifier hs-var">Clos</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755820"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CAction o -&gt; [CAction o] -&gt; [CAction o]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[CAction o]
</span><a href="#local-6989586621680755818"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755817"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span class="hs-comment">{-sub e (Clos (Weak n : as) x) = if n == 1 then
                                Clos as x
                               else
                                Clos (Weak (n - 1) : as) x-}</span><span>
</span><span id="line-352"></span><span class="annot"><a href="Agda.Auto.Syntax.html#sub"><span class="hs-identifier hs-var">sub</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TrBr (ICExp o) o
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TrBr (ICExp o) o
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-353"></span><span>
</span><span id="line-354"></span><span id="local-6989586621680756258"><span class="annot"><a href="Agda.Auto.Syntax.html#subi"><span class="hs-identifier hs-type">subi</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756258"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ICExp"><span class="hs-identifier hs-type">ICExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756258"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ICExp"><span class="hs-identifier hs-type">ICExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756258"><span class="hs-identifier hs-type">o</span></a></span></span><span>
</span><span id="line-355"></span><span id="subi"><span class="annot"><span class="annottext">subi :: forall o. MExp o -&gt; ICExp o -&gt; ICExp o
</span><a href="Agda.Auto.Syntax.html#subi"><span class="hs-identifier hs-var hs-var">subi</span></a></span></span><span> </span><span id="local-6989586621680755812"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755812"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Clos"><span class="hs-identifier hs-type">Clos</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CAction o
</span><a href="Agda.Auto.Syntax.html#Skip"><span class="hs-identifier hs-var">Skip</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680755811"><span class="annot"><span class="annottext">[CAction o]
</span><a href="#local-6989586621680755811"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680755810"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755810"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CAction o] -&gt; MExp o -&gt; Clos (MExp o) o
forall a o. [CAction o] -&gt; a -&gt; Clos a o
</span><a href="Agda.Auto.Syntax.html#Clos"><span class="hs-identifier hs-var">Clos</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Clos (MExp o) o -&gt; CAction o
forall o. ICExp o -&gt; CAction o
</span><a href="Agda.Auto.Syntax.html#Sub"><span class="hs-identifier hs-var">Sub</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CAction o] -&gt; MExp o -&gt; Clos (MExp o) o
forall a o. [CAction o] -&gt; a -&gt; Clos a o
</span><a href="Agda.Auto.Syntax.html#Clos"><span class="hs-identifier hs-var">Clos</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755812"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">CAction o -&gt; [CAction o] -&gt; [CAction o]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[CAction o]
</span><a href="#local-6989586621680755811"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755810"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-356"></span><span class="annot"><a href="Agda.Auto.Syntax.html#subi"><span class="hs-identifier hs-var">subi</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Clos (MExp o) o
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clos (MExp o) o
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-357"></span><span>
</span><span id="line-358"></span><span id="local-6989586621680756256"><span class="annot"><a href="Agda.Auto.Syntax.html#weak"><span class="hs-identifier hs-type">weak</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Weakening"><span class="hs-identifier hs-type">Weakening</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756256"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680756256"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680756256"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-359"></span><span id="weak"><span class="annot"><span class="annottext">weak :: forall t. Weakening t =&gt; Int -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#weak"><span class="hs-identifier hs-var hs-var">weak</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; t
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-360"></span><span class="annot"><a href="Agda.Auto.Syntax.html#weak"><span class="hs-identifier hs-var">weak</span></a></span><span> </span><span id="local-6989586621680755803"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755803"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; t -&gt; t
forall t. Weakening t =&gt; Int -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#weak%27"><span class="hs-identifier hs-var">weak'</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755803"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-keyword">class</span><span> </span><span id="Weakening"><span class="annot"><a href="Agda.Auto.Syntax.html#Weakening"><span class="hs-identifier hs-var">Weakening</span></a></span></span><span> </span><span id="local-6989586621680756250"><span class="annot"><a href="#local-6989586621680756250"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-363"></span><span>  </span><span id="weak%27"><span class="annot"><a href="Agda.Auto.Syntax.html#weak%27"><span class="hs-identifier hs-type">weak'</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680756250"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680756250"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756248"><span id="local-6989586621680756249"><span class="annot"><a href="Agda.Auto.Syntax.html#Weakening"><span class="hs-identifier hs-type">Weakening</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756249"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Weakening"><span class="hs-identifier hs-type">Weakening</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#TrBr"><span class="hs-identifier hs-type">TrBr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756249"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756248"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-366"></span><span>  </span><span id="local-6989586621680755796"><span class="annot"><span class="annottext">weak' :: Int -&gt; TrBr a o -&gt; TrBr a o
</span><a href="#local-6989586621680755796"><span class="hs-identifier hs-var hs-var hs-var hs-var">weak'</span></a></span></span><span> </span><span id="local-6989586621680755795"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755795"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#TrBr"><span class="hs-identifier hs-type">TrBr</span></a></span><span> </span><span id="local-6989586621680755794"><span class="annot"><span class="annottext">[MExp o]
</span><a href="#local-6989586621680755794"><span class="hs-identifier hs-var">trs</span></a></span></span><span> </span><span id="local-6989586621680755793"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680755793"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MExp o] -&gt; a -&gt; TrBr a o
forall a o. [MExp o] -&gt; a -&gt; TrBr a o
</span><a href="Agda.Auto.Syntax.html#TrBr"><span class="hs-identifier hs-var">TrBr</span></a></span><span> </span><span class="annot"><span class="annottext">[MExp o]
</span><a href="#local-6989586621680755794"><span class="hs-identifier hs-var">trs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; a -&gt; a
forall t. Weakening t =&gt; Int -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#weak%27"><span class="hs-identifier hs-var">weak'</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755795"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680755793"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756244"><span id="local-6989586621680756245"><span class="annot"><a href="Agda.Auto.Syntax.html#Weakening"><span class="hs-identifier hs-type">Weakening</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Clos"><span class="hs-identifier hs-type">Clos</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756245"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756244"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-369"></span><span>  </span><span id="local-6989586621680755790"><span class="annot"><span class="annottext">weak' :: Int -&gt; Clos a o -&gt; Clos a o
</span><a href="#local-6989586621680755790"><span class="hs-identifier hs-var hs-var hs-var hs-var">weak'</span></a></span></span><span> </span><span id="local-6989586621680755789"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755789"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Clos"><span class="hs-identifier hs-type">Clos</span></a></span><span> </span><span id="local-6989586621680755788"><span class="annot"><span class="annottext">[CAction o]
</span><a href="#local-6989586621680755788"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span id="local-6989586621680755787"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680755787"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[CAction o] -&gt; a -&gt; Clos a o
forall a o. [CAction o] -&gt; a -&gt; Clos a o
</span><a href="Agda.Auto.Syntax.html#Clos"><span class="hs-identifier hs-var">Clos</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CAction o
forall o. Int -&gt; CAction o
</span><a href="Agda.Auto.Syntax.html#Weak"><span class="hs-identifier hs-var">Weak</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755789"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">CAction o -&gt; [CAction o] -&gt; [CAction o]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[CAction o]
</span><a href="#local-6989586621680755788"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680755787"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756242"><span class="annot"><a href="Agda.Auto.Syntax.html#Weakening"><span class="hs-identifier hs-type">Weakening</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ICArgList"><span class="hs-identifier hs-type">ICArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756242"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-372"></span><span>  </span><span id="local-6989586621680755782"><span class="annot"><span class="annottext">weak' :: Int -&gt; ICArgList o -&gt; ICArgList o
</span><a href="#local-6989586621680755782"><span class="hs-identifier hs-var hs-var hs-var hs-var">weak'</span></a></span></span><span> </span><span id="local-6989586621680755781"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755781"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-373"></span><span>    </span><span class="annot"><span class="annottext">ICArgList o
</span><a href="Agda.Auto.Syntax.html#CALNil"><span class="hs-identifier hs-var">CALNil</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ICArgList o
forall o. ICArgList o
</span><a href="Agda.Auto.Syntax.html#CALNil"><span class="hs-identifier hs-var">CALNil</span></a></span><span>
</span><span id="line-374"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#CALConcat"><span class="hs-identifier hs-type">CALConcat</span></a></span><span> </span><span id="local-6989586621680755780"><span class="annot"><span class="annottext">Clos (MArgList o) o
</span><a href="#local-6989586621680755780"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680755779"><span class="annot"><span class="annottext">ICArgList o
</span><a href="#local-6989586621680755779"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Clos (MArgList o) o -&gt; ICArgList o -&gt; ICArgList o
forall o. Clos (MArgList o) o -&gt; ICArgList o -&gt; ICArgList o
</span><a href="Agda.Auto.Syntax.html#CALConcat"><span class="hs-identifier hs-var">CALConcat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Clos (MArgList o) o -&gt; Clos (MArgList o) o
forall t. Weakening t =&gt; Int -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#weak%27"><span class="hs-identifier hs-var">weak'</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755781"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Clos (MArgList o) o
</span><a href="#local-6989586621680755780"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ICArgList o -&gt; ICArgList o
forall t. Weakening t =&gt; Int -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#weak%27"><span class="hs-identifier hs-var">weak'</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755781"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">ICArgList o
</span><a href="#local-6989586621680755779"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756240"><span class="annot"><a href="Agda.Auto.Syntax.html#Weakening"><span class="hs-identifier hs-type">Weakening</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Elr"><span class="hs-identifier hs-type">Elr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756240"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-377"></span><span>  </span><span id="local-6989586621680755773"><span class="annot"><span class="annottext">weak' :: Int -&gt; Elr o -&gt; Elr o
</span><a href="#local-6989586621680755773"><span class="hs-identifier hs-var hs-var hs-var hs-var">weak'</span></a></span></span><span> </span><span id="local-6989586621680755772"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755772"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; Elr o -&gt; Elr o
forall t. Renaming t =&gt; (Int -&gt; Int) -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#rename"><span class="hs-identifier hs-var">rename</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755772"><span class="hs-identifier hs-var">n</span></a></span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>
</span><span id="line-379"></span><span class="hs-comment">-- | Substituting for a variable.</span><span>
</span><span id="line-380"></span><span id="local-6989586621680756236"><span class="annot"><a href="Agda.Auto.Syntax.html#doclos"><span class="hs-identifier hs-type">doclos</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#CAction"><span class="hs-identifier hs-type">CAction</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756236"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ICExp"><span class="hs-identifier hs-type">ICExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756236"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-381"></span><span id="doclos"><span class="annot"><span class="annottext">doclos :: forall o. [CAction o] -&gt; Int -&gt; Either Int (ICExp o)
</span><a href="Agda.Auto.Syntax.html#doclos"><span class="hs-identifier hs-var hs-var">doclos</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [CAction o] -&gt; Int -&gt; Either Int (ICExp o)
forall {o}. Int -&gt; [CAction o] -&gt; Int -&gt; Either Int (ICExp o)
</span><a href="#local-6989586621680755769"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-382"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-383"></span><span>  </span><span class="hs-comment">-- ns is the number of weakenings</span><span>
</span><span id="line-384"></span><span>  </span><span id="local-6989586621680755769"><span class="annot"><span class="annottext">f :: Int -&gt; [CAction o] -&gt; Int -&gt; Either Int (ICExp o)
</span><a href="#local-6989586621680755769"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621680755755"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755755"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>            </span><span id="local-6989586621680755754"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755754"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Either Int (ICExp o)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755755"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755754"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>  </span><span class="annot"><a href="#local-6989586621680755769"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span id="local-6989586621680755753"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755753"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Weak"><span class="hs-identifier hs-type">Weak</span></a></span><span> </span><span id="local-6989586621680755752"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755752"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680755751"><span class="annot"><span class="annottext">[CAction o]
</span><a href="#local-6989586621680755751"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680755750"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755750"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [CAction o] -&gt; Int -&gt; Either Int (ICExp o)
</span><a href="#local-6989586621680755769"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755753"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755752"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CAction o]
</span><a href="#local-6989586621680755751"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755750"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-386"></span><span>  </span><span class="annot"><a href="#local-6989586621680755769"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span id="local-6989586621680755749"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755749"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span id="local-6989586621680755748"><span class="annot"><span class="annottext">ICExp o
</span><a href="#local-6989586621680755748"><span class="hs-identifier hs-var">s</span></a></span></span><span>  </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[CAction o]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ICExp o -&gt; Either Int (ICExp o)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ICExp o -&gt; ICExp o
forall t. Weakening t =&gt; Int -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#weak"><span class="hs-identifier hs-var">weak</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755749"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">ICExp o
</span><a href="#local-6989586621680755748"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span>  </span><span class="annot"><a href="#local-6989586621680755769"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span id="local-6989586621680755747"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755747"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CAction o
</span><a href="Agda.Auto.Syntax.html#Skip"><span class="hs-identifier hs-var">Skip</span></a></span><span>   </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[CAction o]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Either Int (ICExp o)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755747"><span class="hs-identifier hs-var">ns</span></a></span><span>
</span><span id="line-388"></span><span>  </span><span class="annot"><a href="#local-6989586621680755769"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span id="local-6989586621680755746"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755746"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CAction o
</span><a href="Agda.Auto.Syntax.html#Skip"><span class="hs-identifier hs-var">Skip</span></a></span><span>   </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680755745"><span class="annot"><span class="annottext">[CAction o]
</span><a href="#local-6989586621680755745"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680755744"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755744"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [CAction o] -&gt; Int -&gt; Either Int (ICExp o)
</span><a href="#local-6989586621680755769"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755746"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CAction o]
</span><a href="#local-6989586621680755745"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755744"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-389"></span><span>  </span><span class="annot"><a href="#local-6989586621680755769"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span id="local-6989586621680755743"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755743"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="annot"><span class="annottext">ICExp o
</span><span class="hs-identifier">_</span></span><span>  </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621680755742"><span class="annot"><span class="annottext">[CAction o]
</span><a href="#local-6989586621680755742"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621680755741"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755741"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [CAction o] -&gt; Int -&gt; Either Int (ICExp o)
</span><a href="#local-6989586621680755769"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755743"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">[CAction o]
</span><a href="#local-6989586621680755742"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755741"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-390"></span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span class="hs-comment">-- | FreeVars class and instances</span><span>
</span><span id="line-393"></span><span>
</span><span id="line-394"></span><span id="local-6989586621680756231"><span class="annot"><a href="Agda.Auto.Syntax.html#freeVars"><span class="hs-identifier hs-type">freeVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756231"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680756231"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set.Set</span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span></span><span>
</span><span id="line-395"></span><span id="freeVars"><span class="annot"><span class="annottext">freeVars :: forall t. FreeVars t =&gt; t -&gt; Set Int
</span><a href="Agda.Auto.Syntax.html#freeVars"><span class="hs-identifier hs-var hs-var">freeVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; t -&gt; Set Int
forall t. FreeVars t =&gt; Int -&gt; t -&gt; Set Int
</span><a href="Agda.Auto.Syntax.html#freeVarsOffset"><span class="hs-identifier hs-var">freeVarsOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-396"></span><span>
</span><span id="line-397"></span><span class="hs-keyword">class</span><span> </span><span id="FreeVars"><span class="annot"><a href="Agda.Auto.Syntax.html#FreeVars"><span class="hs-identifier hs-var">FreeVars</span></a></span></span><span> </span><span id="local-6989586621680756227"><span class="annot"><a href="#local-6989586621680756227"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-398"></span><span>  </span><span id="freeVarsOffset"><span class="annot"><a href="Agda.Auto.Syntax.html#freeVarsOffset"><span class="hs-identifier hs-type">freeVarsOffset</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680756227"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set.Set</span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span>
</span><span id="line-399"></span><span>
</span><span id="line-400"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756223"><span id="local-6989586621680756224"><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756224"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756223"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680756224"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680756223"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-401"></span><span>  </span><span id="local-6989586621680755727"><span class="annot"><span class="annottext">freeVarsOffset :: Int -&gt; (a, b) -&gt; Set Int
</span><a href="#local-6989586621680755727"><span class="hs-identifier hs-var hs-var hs-var hs-var">freeVarsOffset</span></a></span></span><span> </span><span id="local-6989586621680755726"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755726"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680755725"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680755725"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680755724"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680755724"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Int -&gt; Set Int -&gt; Set Int
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.union</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; a -&gt; Set Int
forall t. FreeVars t =&gt; Int -&gt; t -&gt; Set Int
</span><a href="Agda.Auto.Syntax.html#freeVarsOffset"><span class="hs-identifier hs-var">freeVarsOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755726"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680755725"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; b -&gt; Set Int
forall t. FreeVars t =&gt; Int -&gt; t -&gt; Set Int
</span><a href="Agda.Auto.Syntax.html#freeVarsOffset"><span class="hs-identifier hs-var">freeVarsOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755726"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680755724"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756218"><span id="local-6989586621680756219"><span class="annot"><a href="Agda.Auto.Syntax.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756219"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#MM"><span class="hs-identifier hs-type">MM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756219"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756218"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-404"></span><span>  </span><span id="local-6989586621680755716"><span class="annot"><span class="annottext">freeVarsOffset :: Int -&gt; MM t a -&gt; Set Int
</span><a href="#local-6989586621680755716"><span class="hs-identifier hs-var hs-var hs-var hs-var">freeVarsOffset</span></a></span></span><span> </span><span id="local-6989586621680755715"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755715"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680755714"><span class="annot"><span class="annottext">MM t a
</span><a href="#local-6989586621680755714"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; t -&gt; Set Int
forall t. FreeVars t =&gt; Int -&gt; t -&gt; Set Int
</span><a href="Agda.Auto.Syntax.html#freeVarsOffset"><span class="hs-identifier hs-var">freeVarsOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755715"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Empty -&gt; MM t a -&gt; t
forall a b. Empty -&gt; MM a b -&gt; a
</span><a href="Agda.Auto.NarrowingSearch.html#rm"><span class="hs-identifier hs-var">rm</span></a></span><span> </span><span class="annot"><span class="annottext">Empty
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">MM t a
</span><a href="#local-6989586621680755714"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756213"><span class="annot"><a href="Agda.Auto.Syntax.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756213"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756213"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-407"></span><span>  </span><span id="local-6989586621680755706"><span class="annot"><span class="annottext">freeVarsOffset :: Int -&gt; Abs t -&gt; Set Int
</span><a href="#local-6989586621680755706"><span class="hs-identifier hs-var hs-var hs-var hs-var">freeVarsOffset</span></a></span></span><span> </span><span id="local-6989586621680755705"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755705"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span id="local-6989586621680755704"><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621680755704"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621680755703"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680755703"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; t -&gt; Set Int
forall t. FreeVars t =&gt; Int -&gt; t -&gt; Set Int
</span><a href="Agda.Auto.Syntax.html#freeVarsOffset"><span class="hs-identifier hs-var">freeVarsOffset</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755705"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680755703"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-408"></span><span>
</span><span id="line-409"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756211"><span class="annot"><a href="Agda.Auto.Syntax.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Elr"><span class="hs-identifier hs-type">Elr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756211"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-410"></span><span>  </span><span id="local-6989586621680755699"><span class="annot"><span class="annottext">freeVarsOffset :: Int -&gt; Elr o -&gt; Set Int
</span><a href="#local-6989586621680755699"><span class="hs-identifier hs-var hs-var hs-var hs-var">freeVarsOffset</span></a></span></span><span> </span><span id="local-6989586621680755698"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755698"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-411"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621680755697"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755697"><span class="hs-identifier hs-var">v</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Set Int
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755697"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755698"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-412"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Const"><span class="hs-identifier hs-type">Const</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set Int
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>
</span><span id="line-413"></span><span>
</span><span id="line-414"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756207"><span class="annot"><a href="Agda.Auto.Syntax.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756207"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-415"></span><span>  </span><span id="local-6989586621680755683"><span class="annot"><span class="annottext">freeVarsOffset :: Int -&gt; Exp o -&gt; Set Int
</span><a href="#local-6989586621680755683"><span class="hs-identifier hs-var hs-var hs-var hs-var">freeVarsOffset</span></a></span></span><span> </span><span id="local-6989586621680755682"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755682"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-416"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OKHandle (RefInfo o)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680755681"><span class="annot"><span class="annottext">Elr o
</span><a href="#local-6989586621680755681"><span class="hs-identifier hs-var">elr</span></a></span></span><span> </span><span id="local-6989586621680755680"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755680"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; (Elr o, MArgList o) -&gt; Set Int
forall t. FreeVars t =&gt; Int -&gt; t -&gt; Set Int
</span><a href="Agda.Auto.Syntax.html#freeVarsOffset"><span class="hs-identifier hs-var">freeVarsOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755682"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elr o
</span><a href="#local-6989586621680755681"><span class="hs-identifier hs-var">elr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755680"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-417"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680755679"><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755679"><span class="hs-identifier hs-var">b</span></a></span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Abs (MExp o) -&gt; Set Int
forall t. FreeVars t =&gt; Int -&gt; t -&gt; Set Int
</span><a href="Agda.Auto.Syntax.html#freeVarsOffset"><span class="hs-identifier hs-var">freeVarsOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755682"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755679"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-418"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680755678"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755678"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span id="local-6989586621680755677"><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755677"><span class="hs-identifier hs-var">ot</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; (MExp o, Abs (MExp o)) -&gt; Set Int
forall t. FreeVars t =&gt; Int -&gt; t -&gt; Set Int
</span><a href="Agda.Auto.Syntax.html#freeVarsOffset"><span class="hs-identifier hs-var">freeVarsOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755682"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755678"><span class="hs-identifier hs-var">it</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755677"><span class="hs-identifier hs-var">ot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-419"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set Int
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>
</span><span id="line-420"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#AbsurdLambda"><span class="hs-identifier hs-type">AbsurdLambda</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set Int
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>
</span><span id="line-421"></span><span>
</span><span id="line-422"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756206"><span class="annot"><a href="Agda.Auto.Syntax.html#FreeVars"><span class="hs-identifier hs-type">FreeVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ArgList"><span class="hs-identifier hs-type">ArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756206"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-423"></span><span>  </span><span id="local-6989586621680755667"><span class="annot"><span class="annottext">freeVarsOffset :: Int -&gt; ArgList o -&gt; Set Int
</span><a href="#local-6989586621680755667"><span class="hs-identifier hs-var hs-var hs-var hs-var">freeVarsOffset</span></a></span></span><span> </span><span id="local-6989586621680755666"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755666"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621680755665"><span class="annot"><span class="annottext">ArgList o
</span><a href="#local-6989586621680755665"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ArgList o
</span><a href="#local-6989586621680755665"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-424"></span><span>    </span><span class="annot"><span class="annottext">ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set Int
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>
</span><span id="line-425"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-type">ALCons</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621680755664"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755664"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621680755663"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755663"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; (MExp o, MArgList o) -&gt; Set Int
forall t. FreeVars t =&gt; Int -&gt; t -&gt; Set Int
</span><a href="Agda.Auto.Syntax.html#freeVarsOffset"><span class="hs-identifier hs-var">freeVarsOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755666"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755664"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755663"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-426"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-type">ALConPar</span></a></span><span> </span><span id="local-6989586621680755662"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755662"><span class="hs-identifier hs-var">es</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList o -&gt; Set Int
forall t. FreeVars t =&gt; Int -&gt; t -&gt; Set Int
</span><a href="Agda.Auto.Syntax.html#freeVarsOffset"><span class="hs-identifier hs-var">freeVarsOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755666"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755662"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-427"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALProj"><span class="hs-identifier hs-type">ALProj</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Set Int
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-428"></span><span>
</span><span id="line-429"></span><span>
</span><span id="line-430"></span><span class="hs-comment">-- | Renaming Typeclass and instances</span><span>
</span><span id="line-431"></span><span id="local-6989586621680756237"><span class="annot"><a href="Agda.Auto.Syntax.html#rename"><span class="hs-identifier hs-type">rename</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Renaming"><span class="hs-identifier hs-type">Renaming</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756237"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680756237"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680756237"><span class="hs-identifier hs-type">t</span></a></span></span><span>
</span><span id="line-432"></span><span id="rename"><span class="annot"><span class="annottext">rename :: forall t. Renaming t =&gt; (Int -&gt; Int) -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#rename"><span class="hs-identifier hs-var hs-var">rename</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; (Int -&gt; Int) -&gt; t -&gt; t
forall t. Renaming t =&gt; Int -&gt; (Int -&gt; Int) -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#renameOffset"><span class="hs-identifier hs-var">renameOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span class="hs-keyword">class</span><span> </span><span id="Renaming"><span class="annot"><a href="Agda.Auto.Syntax.html#Renaming"><span class="hs-identifier hs-var">Renaming</span></a></span></span><span> </span><span id="local-6989586621680756203"><span class="annot"><a href="#local-6989586621680756203"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-435"></span><span>  </span><span id="renameOffset"><span class="annot"><a href="Agda.Auto.Syntax.html#renameOffset"><span class="hs-identifier hs-type">renameOffset</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680756203"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621680756203"><span class="hs-identifier hs-type">t</span></a></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756199"><span id="local-6989586621680756200"><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Renaming"><span class="hs-identifier hs-type">Renaming</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756200"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Renaming"><span class="hs-identifier hs-type">Renaming</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756199"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Renaming"><span class="hs-identifier hs-type">Renaming</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621680756200"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621680756199"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-438"></span><span>  </span><span id="local-6989586621680755651"><span class="annot"><span class="annottext">renameOffset :: Int -&gt; (Int -&gt; Int) -&gt; (a, b) -&gt; (a, b)
</span><a href="#local-6989586621680755651"><span class="hs-identifier hs-var hs-var hs-var hs-var">renameOffset</span></a></span></span><span> </span><span id="local-6989586621680755650"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755650"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621680755649"><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755649"><span class="hs-identifier hs-var">ren</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621680755648"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680755648"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680755647"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680755647"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; (Int -&gt; Int) -&gt; a -&gt; a
forall t. Renaming t =&gt; Int -&gt; (Int -&gt; Int) -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#renameOffset"><span class="hs-identifier hs-var">renameOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755650"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755649"><span class="hs-identifier hs-var">ren</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621680755648"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; (Int -&gt; Int) -&gt; b -&gt; b
forall t. Renaming t =&gt; Int -&gt; (Int -&gt; Int) -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#renameOffset"><span class="hs-identifier hs-var">renameOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755650"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755649"><span class="hs-identifier hs-var">ren</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621680755647"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756195"><span id="local-6989586621680756196"><span class="annot"><a href="Agda.Auto.Syntax.html#Renaming"><span class="hs-identifier hs-type">Renaming</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756196"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Renaming"><span class="hs-identifier hs-type">Renaming</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#MM"><span class="hs-identifier hs-type">MM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756196"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756195"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-441"></span><span>  </span><span id="local-6989586621680755640"><span class="annot"><span class="annottext">renameOffset :: Int -&gt; (Int -&gt; Int) -&gt; MM t a -&gt; MM t a
</span><a href="#local-6989586621680755640"><span class="hs-identifier hs-var hs-var hs-var hs-var">renameOffset</span></a></span></span><span> </span><span id="local-6989586621680755639"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755639"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621680755638"><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755638"><span class="hs-identifier hs-var">ren</span></a></span></span><span> </span><span id="local-6989586621680755637"><span class="annot"><span class="annottext">MM t a
</span><a href="#local-6989586621680755637"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; MM t a
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(t -&gt; MM t a) -&gt; t -&gt; MM t a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; (Int -&gt; Int) -&gt; t -&gt; t
forall t. Renaming t =&gt; Int -&gt; (Int -&gt; Int) -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#renameOffset"><span class="hs-identifier hs-var">renameOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755639"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755638"><span class="hs-identifier hs-var">ren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Empty -&gt; MM t a -&gt; t
forall a b. Empty -&gt; MM a b -&gt; a
</span><a href="Agda.Auto.NarrowingSearch.html#rm"><span class="hs-identifier hs-var">rm</span></a></span><span> </span><span class="annot"><span class="annottext">Empty
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">MM t a
</span><a href="#local-6989586621680755637"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-442"></span><span>
</span><span id="line-443"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756193"><span class="annot"><a href="Agda.Auto.Syntax.html#Renaming"><span class="hs-identifier hs-type">Renaming</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756193"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Renaming"><span class="hs-identifier hs-type">Renaming</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756193"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-444"></span><span>  </span><span id="local-6989586621680755630"><span class="annot"><span class="annottext">renameOffset :: Int -&gt; (Int -&gt; Int) -&gt; Abs t -&gt; Abs t
</span><a href="#local-6989586621680755630"><span class="hs-identifier hs-var hs-var hs-var hs-var">renameOffset</span></a></span></span><span> </span><span id="local-6989586621680755629"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755629"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621680755628"><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755628"><span class="hs-identifier hs-var">ren</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span id="local-6989586621680755627"><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621680755627"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621680755626"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680755626"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MId -&gt; t -&gt; Abs t
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621680755627"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">(t -&gt; Abs t) -&gt; t -&gt; Abs t
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; (Int -&gt; Int) -&gt; t -&gt; t
forall t. Renaming t =&gt; Int -&gt; (Int -&gt; Int) -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#renameOffset"><span class="hs-identifier hs-var">renameOffset</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755629"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755628"><span class="hs-identifier hs-var">ren</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621680755626"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756238"><span class="annot"><a href="Agda.Auto.Syntax.html#Renaming"><span class="hs-identifier hs-type">Renaming</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Elr"><span class="hs-identifier hs-type">Elr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756238"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-447"></span><span>  </span><span id="local-6989586621680755621"><span class="annot"><span class="annottext">renameOffset :: Int -&gt; (Int -&gt; Int) -&gt; Elr o -&gt; Elr o
</span><a href="#local-6989586621680755621"><span class="hs-identifier hs-var hs-var hs-var hs-var">renameOffset</span></a></span></span><span> </span><span id="local-6989586621680755620"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755620"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621680755619"><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755619"><span class="hs-identifier hs-var">ren</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-448"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621680755618"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755618"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755618"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755620"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Elr o
forall o. Int -&gt; Elr o
</span><a href="Agda.Auto.Syntax.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755619"><span class="hs-identifier hs-var">ren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755618"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755620"><span class="hs-identifier hs-var">j</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755620"><span class="hs-identifier hs-var">j</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-449"></span><span>    </span><span id="local-6989586621680755617"><span class="annot"><span class="annottext">Elr o
</span><a href="#local-6989586621680755617"><span class="hs-identifier hs-var">e</span></a></span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Elr o
</span><a href="#local-6989586621680755617"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-450"></span><span>
</span><span id="line-451"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756189"><span class="annot"><a href="Agda.Auto.Syntax.html#Renaming"><span class="hs-identifier hs-type">Renaming</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756189"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-452"></span><span>  </span><span id="local-6989586621680755605"><span class="annot"><span class="annottext">renameOffset :: Int -&gt; (Int -&gt; Int) -&gt; Exp o -&gt; Exp o
</span><a href="#local-6989586621680755605"><span class="hs-identifier hs-var hs-var hs-var hs-var">renameOffset</span></a></span></span><span> </span><span id="local-6989586621680755604"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755604"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621680755603"><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755603"><span class="hs-identifier hs-var">ren</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-453"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span id="local-6989586621680755602"><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621680755602"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621680755601"><span class="annot"><span class="annottext">OKHandle (RefInfo o)
</span><a href="#local-6989586621680755601"><span class="hs-identifier hs-var">ok</span></a></span></span><span> </span><span id="local-6989586621680755600"><span class="annot"><span class="annottext">Elr o
</span><a href="#local-6989586621680755600"><span class="hs-identifier hs-var">elr</span></a></span></span><span> </span><span id="local-6989586621680755599"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755599"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Elr o -&gt; MArgList o -&gt; Exp o) -&gt; (Elr o, MArgList o) -&gt; Exp o
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
forall o.
Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621680755602"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">OKHandle (RefInfo o)
</span><a href="#local-6989586621680755601"><span class="hs-identifier hs-var">ok</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Elr o, MArgList o) -&gt; Exp o) -&gt; (Elr o, MArgList o) -&gt; Exp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; (Int -&gt; Int) -&gt; (Elr o, MArgList o) -&gt; (Elr o, MArgList o)
forall t. Renaming t =&gt; Int -&gt; (Int -&gt; Int) -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#renameOffset"><span class="hs-identifier hs-var">renameOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755604"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755603"><span class="hs-identifier hs-var">ren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elr o
</span><a href="#local-6989586621680755600"><span class="hs-identifier hs-var">elr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755599"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-454"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621680755597"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755597"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621680755596"><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755596"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Abs (MExp o) -&gt; Exp o
forall o. Hiding -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755597"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; (Int -&gt; Int) -&gt; Abs (MExp o) -&gt; Abs (MExp o)
forall t. Renaming t =&gt; Int -&gt; (Int -&gt; Int) -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#renameOffset"><span class="hs-identifier hs-var">renameOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755604"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755603"><span class="hs-identifier hs-var">ren</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755596"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-455"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621680755595"><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621680755595"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680755594"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755594"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621680755593"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680755593"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621680755592"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755592"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span id="local-6989586621680755591"><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755591"><span class="hs-identifier hs-var">ot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(MExp o -&gt; Abs (MExp o) -&gt; Exp o)
-&gt; (MExp o, Abs (MExp o)) -&gt; Exp o
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
forall o.
Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621680755595"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755594"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621680755593"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((MExp o, Abs (MExp o)) -&gt; Exp o)
-&gt; (MExp o, Abs (MExp o)) -&gt; Exp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int
-&gt; (Int -&gt; Int) -&gt; (MExp o, Abs (MExp o)) -&gt; (MExp o, Abs (MExp o))
forall t. Renaming t =&gt; Int -&gt; (Int -&gt; Int) -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#renameOffset"><span class="hs-identifier hs-var">renameOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755604"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755603"><span class="hs-identifier hs-var">ren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755592"><span class="hs-identifier hs-var">it</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Abs (MExp o)
</span><a href="#local-6989586621680755591"><span class="hs-identifier hs-var">ot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-456"></span><span>    </span><span id="local-6989586621680755590"><span class="annot"><span class="annottext">e :: Exp o
</span><a href="#local-6989586621680755590"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp o
</span><a href="#local-6989586621680755590"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-457"></span><span>    </span><span id="local-6989586621680755589"><span class="annot"><span class="annottext">e :: Exp o
</span><a href="#local-6989586621680755589"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.Auto.Syntax.html#AbsurdLambda"><span class="hs-identifier hs-type">AbsurdLambda</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp o
</span><a href="#local-6989586621680755589"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680756188"><span class="annot"><a href="Agda.Auto.Syntax.html#Renaming"><span class="hs-identifier hs-type">Renaming</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ArgList"><span class="hs-identifier hs-type">ArgList</span></a></span><span> </span><span class="annot"><a href="#local-6989586621680756188"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-460"></span><span>  </span><span id="local-6989586621680755579"><span class="annot"><span class="annottext">renameOffset :: Int -&gt; (Int -&gt; Int) -&gt; ArgList o -&gt; ArgList o
</span><a href="#local-6989586621680755579"><span class="hs-identifier hs-var hs-var hs-var hs-var">renameOffset</span></a></span></span><span> </span><span id="local-6989586621680755578"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755578"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621680755577"><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755577"><span class="hs-identifier hs-var">ren</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-461"></span><span>    </span><span class="annot"><span class="annottext">ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ArgList o
forall o. ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span>
</span><span id="line-462"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-type">ALCons</span></a></span><span> </span><span id="local-6989586621680755576"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755576"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621680755575"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755575"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621680755574"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755574"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(MExp o -&gt; MArgList o -&gt; ArgList o)
-&gt; (MExp o, MArgList o) -&gt; ArgList o
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; MExp o -&gt; MArgList o -&gt; ArgList o
forall o. Hiding -&gt; MExp o -&gt; MArgList o -&gt; ArgList o
</span><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-var">ALCons</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621680755576"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((MExp o, MArgList o) -&gt; ArgList o)
-&gt; (MExp o, MArgList o) -&gt; ArgList o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; (Int -&gt; Int) -&gt; (MExp o, MArgList o) -&gt; (MExp o, MArgList o)
forall t. Renaming t =&gt; Int -&gt; (Int -&gt; Int) -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#renameOffset"><span class="hs-identifier hs-var">renameOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755578"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755577"><span class="hs-identifier hs-var">ren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621680755575"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755574"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-type">ALConPar</span></a></span><span> </span><span id="local-6989586621680755573"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755573"><span class="hs-keyword hs-var">as</span></a></span></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MArgList o -&gt; ArgList o
forall o. MArgList o -&gt; ArgList o
</span><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-var">ALConPar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; (Int -&gt; Int) -&gt; MArgList o -&gt; MArgList o
forall t. Renaming t =&gt; Int -&gt; (Int -&gt; Int) -&gt; t -&gt; t
</span><a href="Agda.Auto.Syntax.html#renameOffset"><span class="hs-identifier hs-var">renameOffset</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621680755578"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
</span><a href="#local-6989586621680755577"><span class="hs-identifier hs-var">ren</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621680755573"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-464"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALProj"><span class="hs-identifier hs-type">ALProj</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ArgList o
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-465"></span></pre></body></html>